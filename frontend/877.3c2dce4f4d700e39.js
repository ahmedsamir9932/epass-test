"use strict";(self.webpackChunke_invoice=self.webpackChunke_invoice||[]).push([[877],{9877:(Et,F,p)=>{p.r(F),p.d(F,{AddInvoiceModule:()=>Gt});var d=p(6895),m=p(2741),e=p(4650),g=p(2605),N=p(4383),P=p(6290),O=p(605);function k(o,r){1&o&&(e.TgZ(0,"div",9)(1,"div",1),e._uU(2,"3"),e.qZA(),e.TgZ(3,"div",2)(4,"p",3),e._uU(5,"Order & Payments "),e.TgZ(6,"span"),e._uU(7,"(Optional)"),e.qZA()(),e.TgZ(8,"p",4),e._uU(9,"Add Order details and payment information."),e.qZA()()())}function M(o,r){1&o&&(e.TgZ(0,"div",10)(1,"div",1),e._uU(2,"4"),e.qZA(),e.TgZ(3,"div",2)(4,"p",3),e._uU(5,"Delivery "),e.TgZ(6,"span"),e._uU(7,"(Optional)"),e.qZA()(),e.TgZ(8,"p",4),e._uU(9,"Add Delivery information"),e.qZA()()())}const D=function(o,r){return{"valid-step":o,"invalid-step":r}};let S=(()=>{class o{constructor(t,n,i){this.router=t,this.invoiceService=n,this.toaster=i}ngOnInit(){this.docSubType=localStorage.getItem("docSubType"),this.docSubType||(this.toaster.error("Error, Add new Document Again"),this.router.navigate(["/invoices"])),this.loadAllSubscriptionForms()}loadAllSubscriptionForms(){this.invoiceService.basicInformationForm.subscribe(t=>this.basicInformationForm=t),this.invoiceService.issuerReceiverForm.subscribe(t=>this.issuerReceiverForm=t),this.invoiceService.lineItemsForm.subscribe(t=>this.lineItemsForm=t),this.invoiceService.orderPaymentsForm.subscribe(t=>this.orderPaymentsForm=t),this.invoiceService.deliveryForm.subscribe(t=>this.deliveryForm=t)}navigate(t){this.router.navigate([`/add-invoice/${t}`],{queryParamsHandling:"preserve"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.F0),e.Y36(m.q),e.Y36(N._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-invoice-steps"]],decls:30,vars:10,consts:[["routerLink","/add-invoice/issuer_receiver","queryParamsHandling","preserve","routerLinkActive","active-step",1,"step-container",3,"ngClass"],[1,"step-number"],[1,"step-details"],[1,"step-title"],[1,"step-description"],["routerLink","/add-invoice/line_items","queryParamsHandling","preserve","routerLinkActive","active-step",1,"step-container",3,"ngClass"],["class","step-container","routerLink","/add-invoice/order_payments","queryParamsHandling","preserve","routerLinkActive","active-step",4,"ngIf"],["class","step-container","routerLink","/add-invoice/delivery","queryParamsHandling","preserve","routerLinkActive","active-step",4,"ngIf"],["routerLink","/add-invoice/summary_submit","queryParamsHandling","preserve","routerLinkActive","active-step",1,"step-container"],["routerLink","/add-invoice/order_payments","queryParamsHandling","preserve","routerLinkActive","active-step",1,"step-container"],["routerLink","/add-invoice/delivery","queryParamsHandling","preserve","routerLinkActive","active-step",1,"step-container"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"1"),e.qZA(),e.TgZ(3,"div",2)(4,"p",3),e._uU(5,"Issuer & Receiver "),e.TgZ(6,"span"),e._uU(7,"(Mandatory)"),e.qZA()(),e.TgZ(8,"p",4),e._uU(9,"From & To"),e.qZA()()(),e.TgZ(10,"div",5)(11,"div",1),e._uU(12,"2"),e.qZA(),e.TgZ(13,"div",2)(14,"p",3),e._uU(15,"Line Items "),e.TgZ(16,"span"),e._uU(17,"(Mandatory)"),e.qZA()(),e.TgZ(18,"p",4),e._uU(19," Add the contents of the invoice, tax and all information of the selected items "),e.qZA()()(),e.YNc(20,k,10,0,"div",6),e.YNc(21,M,10,0,"div",7),e.TgZ(22,"div",8)(23,"div",1),e._uU(24,"5"),e.qZA(),e.TgZ(25,"div",2)(26,"p",3),e._uU(27,"Summary & Submit"),e.qZA(),e.TgZ(28,"p",4),e._uU(29,"Review your document before send"),e.qZA()()()),2&t&&(e.Q6J("ngClass",e.WLB(4,D,n.issuerReceiverForm.submitted&&n.issuerReceiverForm.valid,n.issuerReceiverForm.submitted&&!n.issuerReceiverForm.valid)),e.xp6(10),e.Q6J("ngClass",e.WLB(7,D,n.lineItemsForm.submitted&&n.lineItemsForm.valid,n.lineItemsForm.submitted&&!n.lineItemsForm.valid)),e.xp6(10),e.Q6J("ngIf","d"==n.docSubType),e.xp6(1),e.Q6J("ngIf","d"==n.docSubType))},dependencies:[d.mk,d.O5,g.rH,g.Od],styles:['@charset "UTF-8";.step-container[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;background:#f4f4f4;border-radius:5px;padding:20px;cursor:pointer;transition:all .3s}.step-container[_ngcontent-%COMP%]:hover{background:#f4f4f4;outline:1px solid #24324d}.step-container.active-step[_ngcontent-%COMP%]{background:#f4f4f4;outline:1px solid #24324d;box-shadow:0 4px 4px #00000040}.step-container[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{display:flex;flex-shrink:0;justify-content:center;align-items:center;width:25px;height:25px;border-radius:50%;background-color:#00648b;color:#fff;margin:0 10px}.step-container[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{margin-bottom:0;color:#24324d;font-weight:500}.step-container[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;color:#454545}.step-container[_ngcontent-%COMP%]   .step-details[_ngcontent-%COMP%]   .step-description[_ngcontent-%COMP%]{margin-bottom:0;margin-top:5px;font-size:12px;color:#8f8f8f}.valid-step[_ngcontent-%COMP%]{outline:2px solid #037E00!important;box-shadow:none!important;position:relative}.valid-step[_ngcontent-%COMP%]:hover{outline:2px solid #037E00!important}.valid-step[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;bottom:10px;right:10px;color:#fff;font-size:16px;background:#037E00;border-radius:50%;padding:0 6px;font-weight:700}.invalid-step[_ngcontent-%COMP%]{outline:2px solid #C9252B!important;box-shadow:none!important;position:relative}.invalid-step[_ngcontent-%COMP%]:hover{outline:2px solid #C9252B!important}.invalid-step[_ngcontent-%COMP%]:after{content:"x";position:absolute;bottom:10px;right:10px;color:#fff;background:#C9252B;font-size:16px;border-radius:50%;padding:0 7px}']}),o})();var a=p(4006),u=p(9022),L=p(455);const J=["internalId"];let V=(()=>{class o{constructor(t,n){this.fb=t,this.invoicesService=n,this.form=this.fb.group({internalId:[{value:Math.floor(999999999999*Math.random()),disabled:!0}],date:[{value:"Auto",disabled:!0}],time:[{value:"Auto",disabled:!0}],notify:[!1]})}ngOnInit(){this.updateBasicForm()}updateBasicForm(){this.invoicesService.basicInformationForm.next({submitted:!0,valid:!0,value:this.form.getRawValue()})}editInternalId(){this.form.get("internalId")?.enable(),this.internalId.nativeElement.focus()}editDateTime(){this.form.get("date")?.enable(),this.form.get("date")?.patchValue((new Date).toISOString().split("T")[0]),this.form.get("time")?.enable()}updateInternalIdValue(){this.updateBasicForm()}updateDateTimeValue(){this.updateBasicForm()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(m.q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-invoice-basic-information"]],viewQuery:function(t,n){if(1&t&&e.Gf(J,5),2&t){let i;e.iGM(i=e.CRH())&&(n.internalId=i.first)}},decls:29,vars:4,consts:[[1,"circle-indicator"],[3,"expanded"],[1,"form",3,"formGroup"],[1,"row","py-3"],[1,"col-md-4"],["for","internalId",1,"mb-3"],[1,"d-flex"],["type","text","id","internalId","formControlName","internalId",1,"form-control",3,"focusout"],["internalId",""],[1,"dark-light","mx-2",3,"click"],[1,"bi","bi-pencil-square"],["for","dateTime",1,"mb-3"],["id","dateTime","formControlName","date",1,"form-control",3,"type","focusout"],["formControlName","time",1,"form-control","mx-2",3,"type","focusout"],[1,"dark-light",3,"click"],[1,"mb-3"],[1,"mt-2"],["formControlName","notify"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-accordion",0)(1,"mat-expansion-panel",1)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4," Basic Information: Full Invoice "),e.qZA()(),e.TgZ(5,"form",2)(6,"div",3)(7,"div",4)(8,"label",5),e._uU(9,"Internal ID *"),e.qZA(),e.TgZ(10,"div",6)(11,"input",7,8),e.NdJ("focusout",function(){return n.updateInternalIdValue()}),e.qZA(),e.TgZ(13,"button",9),e.NdJ("click",function(){return n.editInternalId()}),e._UZ(14,"i",10),e.qZA()()(),e.TgZ(15,"div",4)(16,"label",11),e._uU(17,"Date Time Issued *"),e.qZA(),e.TgZ(18,"div",6)(19,"input",12),e.NdJ("focusout",function(){return n.updateDateTimeValue()}),e.qZA(),e.TgZ(20,"input",13),e.NdJ("focusout",function(){return n.updateDateTimeValue()}),e.qZA(),e.TgZ(21,"button",14),e.NdJ("click",function(){return n.editDateTime()}),e._UZ(22,"i",10),e.qZA()()(),e.TgZ(23,"div",4)(24,"label",15),e._uU(25,"Notify me about this document"),e.qZA(),e.TgZ(26,"div",16)(27,"mat-slide-toggle",17),e._uU(28,"Personally on Web / Mobile"),e.qZA()()()()()()()),2&t){let i,l;e.xp6(1),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("formGroup",n.form),e.xp6(14),e.Q6J("type",null!=(i=n.form.get("date"))&&i.disabled?"text":"date"),e.xp6(1),e.Q6J("type",null!=(l=n.form.get("time"))&&l.disabled?"text":"time")}},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,u.pp,u.ib,u.yz,u.yK,L.Rr],styles:[".mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{background:#ffffff!important;box-shadow:0 4px 4px #00000040!important;border-radius:5px!important}.mat-expansion-panel-header[_ngcontent-%COMP%]{background:#f8f8f8!important;color:#24324d;font-weight:500}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-keyboard-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-program-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]:not(.mat-expanded)   .mat-expansion-panel-header[_ngcontent-%COMP%]:hover:not([aria-disabled=true]){background:#f8f8f8!important}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px!important}.form[_ngcontent-%COMP%]{padding:0 24px 16px}"]}),o})();var C=p(4463);function Q(o,r){1&o&&e._UZ(0,"app-loader")}function Y(o,r){if(1&o&&(e.TgZ(0,"span",17),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorReadingToken," ")}}function R(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"p",6),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"p",7),e._uU(7),e.qZA()(),e.TgZ(8,"div",8),e.YNc(9,Y,2,1,"span",9),e.TgZ(10,"button"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addInvoice())}),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"div",11)(17,"div",12)(18,"div",13),e._UZ(19,"app-invoice-steps"),e.qZA(),e.TgZ(20,"div",14)(21,"div",15),e._UZ(22,"app-invoice-basic-information"),e.qZA(),e.TgZ(23,"div",16),e._UZ(24,"router-outlet"),e.qZA()()()()()}if(2&o){const t=e.oxw();e.xp6(4),e.AsE("",e.lcZ(5,7,"invoices")," | V ",t.docVersion,""),e.xp6(3),e.hij("Internal ID ",null==t.basicInformationFormValue?null:t.basicInformationFormValue.value.internalId,""),e.xp6(2),e.Q6J("ngIf",t.errorReadingToken),e.xp6(2),e.Oqu(e.lcZ(12,9,"Save as Template")),e.xp6(2),e.Q6J("disabled",!(null!=t.issuerReceiverFormValue&&t.issuerReceiverFormValue.valid&&null!=t.lineItemsFormValue&&t.lineItemsFormValue.valid)),e.xp6(1),e.Oqu(e.lcZ(15,11,"Save & Close"))}}let G=(()=>{class o{constructor(t,n,i,l){this.router=t,this.invoicesService=n,this.cdr=i,this.toaster=l,this.isLoading=!1,this.errorReadingToken=""}ngOnInit(){this.router.navigate(["/add-invoice/issuer_receiver"]),this.getDataFromLocalStorage(),this.watchForms()}getDataFromLocalStorage(){this.docType=localStorage.getItem("docType"),this.docVersion=localStorage.getItem("docVersion"),(!this.docType||!this.docVersion)&&(this.toaster.error("Error, Add new Document Again"),this.router.navigate(["/invoices"]))}watchForms(){this.invoicesService.basicInformationForm.subscribe(t=>{t.submitted&&(this.basicInformationFormValue=t,this.cdr.detectChanges())}),this.invoicesService.issuerReceiverForm.subscribe(t=>{t.submitted&&(this.issuerReceiverFormValue=t)}),this.invoicesService.lineItemsForm.subscribe(t=>{t.submitted&&(this.lineItemsFormValue=t)}),this.invoicesService.orderPaymentsForm.subscribe(t=>{this.orderPaymentsFormValue=t}),this.invoicesService.deliveryForm.subscribe(t=>{this.deliveryFormValue=t})}addInvoice(){let t={receiver:{...this.issuerReceiverFormValue.value},documentType:this.docType,documentTypeVersion:this.docVersion,internalID:this.basicInformationFormValue.value?.internalId?.toString(),taxpayerActivityCode:this.issuerReceiverFormValue.value.taxpayerActivityCode,lineItems:this.lineItemsFormValue.value.items.map(n=>({...n,itemCode:n.itemCode.codeLookupValue,currency:n.currency.currency.code,unitType:n.unitType.code,discountAmount:n.discountAmount||0,discountRate:n.discountRate||0,itemsDiscount:n.itemsDiscount||0,totalSales:n.totalSales||0,totalTaxableFees:n.totalTaxableFees||0,valueDifference:n.valueDifference||0,taxableItems:n.taxableItems.map(i=>({amount:i.amount,rate:i.rate,taxType:i.taxType.code,subType:i.taxSubType.code}))})),extraDiscountAmount:this.lineItemsFormValue.value.extraInvoiceDiscount||0,totalItemsDiscountAmount:0,totalAmount:this.lineItemsFormValue.value.totalAmount||0,totalDiscountAmount:this.lineItemsFormValue.value.totalDiscount,payment:this.orderPaymentsFormValue.value?{...this.orderPaymentsFormValue.value}:null,delivery:this.deliveryFormValue.value?{...this.deliveryFormValue.value,grossWeight:this.deliveryFormValue.value.grossWeight||0,netWeight:this.deliveryFormValue.value.netWeight||0}:null};this.isLoading=!0,this.errorReadingToken="",+this.docVersion<=.9?this.invoicesService.addInvoice(t).subscribe({next:n=>{this.isLoading=!1,this.router.navigate(["/invoices"])},error:n=>{this.isLoading=!1}}):this.invoicesService.signAndSubmit().subscribe({next:n=>{console.log(n),this.isLoading=!1,this.errorReadingToken="",t.signature=n.data,console.log("new Data",t),this.isLoading=!0,this.invoicesService.addInvoice(t).subscribe({next:i=>{this.isLoading=!1,this.router.navigate(["/invoices"])},error:i=>{this.isLoading=!1}})},error:n=>{console.log(n),this.isLoading=!1,this.errorReadingToken=n.error.message}})}ngOnDestroy(){this.invoicesService.basicInformationForm.next(m.S),this.invoicesService.issuerReceiverForm.next(m.S),this.invoicesService.lineItemsForm.next(m.S),this.invoicesService.orderPaymentsForm.next(m.S),this.invoicesService.deliveryForm.next(m.S),this.invoicesService.selectedCurrency.next("EGP"),localStorage.removeItem("docType"),localStorage.removeItem("docVersion"),localStorage.removeItem("docSubType")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.F0),e.Y36(m.q),e.Y36(e.sBO),e.Y36(N._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-invoice-layout"]],decls:3,vars:3,consts:[[3,"withLogo"],[4,"ngIf"],["class","page-container",4,"ngIf"],[1,"page-container"],[1,"page-header"],[1,"title"],[1,"mb-1"],[1,"internal-id"],[1,"action-btn","d-flex","align-items-center"],["class","primary me-3",4,"ngIf"],[3,"disabled","click"],[1,"content"],[1,"row"],[1,"col-md-3"],[1,"col-md-9"],[1,"basic-info"],[1,"router-content"],[1,"primary","me-3"]],template:function(t,n){1&t&&(e._UZ(0,"app-header",0),e.YNc(1,Q,1,0,"app-loader",1),e.YNc(2,R,25,13,"div",2)),2&t&&(e.Q6J("withLogo",!0),e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading))},dependencies:[d.O5,P.G,O.R,g.lC,S,V,C.X$],styles:[".page-container[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{padding:8px 35px 8px 60px}.internal-id[_ngcontent-%COMP%]{color:#000;font-size:14px}.action-btn[_ngcontent-%COMP%]{display:flex}.action-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px;background:#eaeaea;border-radius:5px;margin-right:5px}.content[_ngcontent-%COMP%]{padding:40px 35px 8px 60px}.router-content[_ngcontent-%COMP%]{margin-top:20px}"]}),o})();var E=p(4689),b=p(4039),v=p(8796),T=p(3267);const B=["receiverAddressSidenav"];function j(o,r){1&o&&e._UZ(0,"app-loader")}function H(o,r){if(1&o&&(e.TgZ(0,"ng-option",30),e._uU(1),e.qZA()),2&o){const t=r.$implicit,n=e.oxw(2);e.Q6J("value",null==t?null:t.code),e.xp6(1),e.hij(" ","ar"===n.translate.currentLang?null==t?null:t.desc_Ar:null==t?null:t.desc_En," ")}}function K(o,r){if(1&o&&(e.TgZ(0,"form",12)(1,"div",13)(2,"div",14)(3,"label",15),e._uU(4,"Country "),e.TgZ(5,"span",16),e._uU(6," * "),e.qZA()(),e.TgZ(7,"ng-select",17),e.YNc(8,H,2,2,"ng-option",18),e.qZA()(),e.TgZ(9,"div",14)(10,"label",15),e._uU(11,"Governorate "),e.TgZ(12,"span",16),e._uU(13," * "),e.qZA()(),e._UZ(14,"input",19),e.qZA()(),e.TgZ(15,"div",13)(16,"div",20)(17,"label",15),e._uU(18,"City "),e.TgZ(19,"span",16),e._uU(20," * "),e.qZA()(),e._UZ(21,"input",21),e.qZA()(),e.TgZ(22,"div",13)(23,"div",20)(24,"label",15),e._uU(25," Building Name/No "),e.TgZ(26,"span",16),e._uU(27," * "),e.qZA()(),e._UZ(28,"input",22),e.qZA()(),e.TgZ(29,"div",13)(30,"div",23)(31,"label",15),e._uU(32," Floor No."),e.qZA(),e._UZ(33,"input",24),e.qZA(),e.TgZ(34,"div",23)(35,"label",15),e._uU(36," Flat No. "),e.qZA(),e._UZ(37,"input",25),e.qZA()(),e.TgZ(38,"div",13)(39,"div",20)(40,"label",15),e._uU(41," Street Name "),e.TgZ(42,"span",16),e._uU(43," * "),e.qZA()(),e._UZ(44,"input",26),e.qZA()(),e.TgZ(45,"div",13)(46,"div",20)(47,"label",15),e._uU(48," Street Name 2 "),e.qZA(),e._UZ(49,"input",27),e.qZA()(),e.TgZ(50,"div",13)(51,"div",20)(52,"label",15),e._uU(53," Additional Information (eg.closest landmark/street corner) "),e.qZA(),e._UZ(54,"input",28),e.qZA()(),e.TgZ(55,"div",13)(56,"div",14)(57,"label",15),e._uU(58," Postal Code "),e.qZA(),e._UZ(59,"input",29),e.qZA()()()),2&o){const t=e.oxw();e.Q6J("formGroup",t.addressForm),e.xp6(8),e.Q6J("ngForOf",t.countriesDropDown)}}const z=function(o){return{"d-none":o}};let $=(()=>{class o{constructor(t,n,i,l){this.fb=t,this.lookupsService=n,this.translate=i,this.cdr=l,this.privateShow=!1,this.showChange=new e.vpe,this.submitChange=new e.vpe,this.addressForm=this.fb.group({country:[null,a.kI.required],governate:["",a.kI.required],regionCity:["",a.kI.required],buildingNumber:["",a.kI.required],floor:[""],flat:[""],street:["",a.kI.required],streetName2:[""],additionalInformation:[""],postalCode:[""]}),this.isLoading=!1,this.countriesDropDown=[]}get show(){return this.privateShow}set show(t){this.privateShow=t,this.privateShow||(this.sidenav.close(),document.body.style.position=""),this.showChange.emit(this.privateShow)}ngOnInit(){this.getCountriesDropDowns()}getCountriesDropDowns(){this.isLoading=!0,this.lookupsService.countriesDropDown().subscribe({next:t=>{this.countriesDropDown=t.data,this.isLoading=!1},error:t=>{this.isLoading=!1}})}ngAfterViewInit(){this.privateShow?(this.sidenav.open(),document.body.style.position="fixed"):document.body.style.position="",this.cdr.detectChanges()}closeSideNav(){this.sidenav.close(),this.show=!1}submitFormAndClose(){this.submitChange.emit(this.addressForm.value),this.closeSideNav()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(b.K),e.Y36(C.sK),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-receiver-address"]],viewQuery:function(t,n){if(1&t&&e.Gf(B,5),2&t){let i;e.iGM(i=e.CRH())&&(n.sidenav=i.first)}},inputs:{show:"show"},outputs:{showChange:"showChange",submitChange:"submitChange"},decls:16,vars:10,consts:[[1,"example-container",3,"hasBackdrop","autosize","ngClass"],["sidenav",""],["mode","side","position","end","disableClose","true",1,"filterSideNav",3,"opened","fixedInViewport"],["receiverAddressSidenav",""],[1,"header"],[1,"content"],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"footer"],[3,"click"],[1,"dark",3,"disabled","click"],[1,"bi","bi-save","mx-2"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],["for","",1,"mt-3","mb-2"],[1,"primary"],["formControlName","country"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","governate",1,"form-control"],[1,"col-md-12"],["type","text","formControlName","regionCity",1,"form-control"],["type","text","formControlName","buildingNumber",1,"form-control"],[1,"col-md-3"],["type","text","formControlName","floor",1,"form-control"],["type","text","formControlName","flat",1,"form-control"],["type","text","formControlName","street",1,"form-control"],["type","text","formControlName","streetName2",1,"form-control"],["type","text","formControlName","additionalInformation",1,"form-control"],["type","text","formControlName","postalCode",1,"form-control"],[3,"value"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-sidenav-container",0,1)(2,"mat-sidenav",2,3)(4,"div",4)(5,"span"),e._uU(6,"Receiver Address"),e.qZA()(),e.TgZ(7,"div",5),e.YNc(8,j,1,0,"app-loader",6),e.YNc(9,K,60,2,"form",7),e.qZA(),e.TgZ(10,"div",8)(11,"button",9),e.NdJ("click",function(){return n.closeSideNav()}),e._uU(12,"Cancel"),e.qZA(),e.TgZ(13,"button",10),e.NdJ("click",function(){return n.submitFormAndClose()}),e._uU(14," Save "),e._UZ(15,"i",11),e.qZA()()()()),2&t){const i=e.MAs(3);e.Q6J("hasBackdrop",!0)("autosize",!0)("ngClass",e.VKq(8,z,!i.opened)),e.xp6(2),e.Q6J("opened",!1)("fixedInViewport",!0),e.xp6(6),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(4),e.Q6J("disabled",!n.addressForm.valid)}},dependencies:[d.mk,d.sg,d.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,T.JX,T.TM,O.R,v.w9,v.jq],styles:[".example-container[_ngcontent-%COMP%]{position:fixed;top:0;width:35%;bottom:0;right:0}mat-sidenav[_ngcontent-%COMP%]{width:35%}mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:12px 16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #edeef6;background:#f8f8f8}mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#24324d;font-weight:500;font-size:16px}mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{border-radius:50%;padding:4px 8px;display:flex;justify-content:center;align-items:center;border:1px solid #e8e8ea}mat-sidenav[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#f8f8f8;padding:12px 16px;position:absolute;bottom:0;width:100%}mat-sidenav[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{padding:8px 25px}mat-sidenav[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:12px 16px 85px}mat-sidenav[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{padding:0;margin:0}mat-sidenav[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#ffffff;border:1px solid #d8d8d8}"]}),o})();function W(o,r){if(1&o&&(e.TgZ(0,"ng-option",34),e._uU(1),e.qZA()),2&o){const t=r.$implicit,n=e.oxw();e.Q6J("value",t.code),e.xp6(1),e.hij(" ","ar"===n.translate.currentLang?null==t?null:t.desc_Ar:null==t?null:t.desc_En," ")}}function X(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function ee(o,r){if(1&o&&(e.TgZ(0,"span",14),e.YNc(1,X,2,0,"span",20),e.qZA()),2&o){const t=e.oxw();let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.form.get("type"))?null:n.errors).required)}}function te(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function ne(o,r){if(1&o&&(e.TgZ(0,"span",14),e.YNc(1,te,2,0,"span",20),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.form.get("id"))?null:n.errors).required)}}function oe(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"label",7),e._uU(2,"Registration Number "),e.TgZ(3,"span",14),e._uU(4,"*"),e.qZA()(),e._UZ(5,"input",35),e.YNc(6,ne,2,1,"span",19),e.BQk()),2&o){const t=e.oxw();let n;e.xp6(6),e.Q6J("ngIf",(null==(n=t.form.get("id"))?null:n.invalid)&&(null==(n=t.form.get("id"))?null:n.touched))}}function ie(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function re(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Invalid National ID "),e.qZA())}function ae(o,r){if(1&o&&(e.TgZ(0,"span",14),e.YNc(1,ie,2,0,"span",20),e.YNc(2,re,2,0,"span",20),e.qZA()),2&o){const t=e.oxw(2);let n,i;e.xp6(1),e.Q6J("ngIf",(null==(n=t.form.get("id"))?null:n.errors).required),e.xp6(1),e.Q6J("ngIf",(null==(i=t.form.get("id"))?null:i.errors).pattern)}}function le(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"label",7),e._uU(2,"National ID "),e.TgZ(3,"span",14),e._uU(4,"*"),e.qZA()(),e._UZ(5,"input",35),e.YNc(6,ae,3,2,"span",19),e.BQk()),2&o){const t=e.oxw();let n;e.xp6(6),e.Q6J("ngIf",(null==(n=t.form.get("id"))?null:n.invalid)&&(null==(n=t.form.get("id"))?null:n.touched))}}function se(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function ue(o,r){if(1&o&&(e.TgZ(0,"span",14),e.YNc(1,se,2,0,"span",20),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.form.get("id"))?null:n.errors).required)}}function ce(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"label",7),e._uU(2,"ID "),e.TgZ(3,"span",14),e._uU(4,"*"),e.qZA()(),e._UZ(5,"input",35),e.YNc(6,ue,2,1,"span",19),e.BQk()),2&o){const t=e.oxw();let n;e.xp6(6),e.Q6J("ngIf",(null==(n=t.form.get("id"))?null:n.invalid)&&(null==(n=t.form.get("id"))?null:n.touched))}}function pe(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function de(o,r){if(1&o&&(e.TgZ(0,"span",14),e.YNc(1,pe,2,0,"span",20),e.qZA()),2&o){const t=e.oxw();let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.form.get("name"))?null:n.errors).required)}}function me(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function _e(o,r){if(1&o&&(e.TgZ(0,"span",14),e.YNc(1,me,2,0,"span",20),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.form.get("branchAddress"))?null:n.errors).required)}}function ge(o,r){if(1&o&&(e.TgZ(0,"div",6)(1,"label",7),e._uU(2,"Branch Address "),e.TgZ(3,"span",14),e._uU(4,"*"),e.qZA()(),e._UZ(5,"input",36),e.YNc(6,_e,2,1,"span",19),e.qZA()),2&o){const t=e.oxw();let n;e.xp6(6),e.Q6J("ngIf",(null==(n=t.form.get("branchAddress"))?null:n.invalid)&&(null==(n=t.form.get("branchAddress"))?null:n.touched))}}function fe(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function ve(o,r){if(1&o&&(e.TgZ(0,"span",14),e.YNc(1,fe,2,0,"span",20),e.qZA()),2&o){const t=e.oxw();let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.form.get("address"))?null:n.errors).required)}}function xe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-receiver-address",37),e.NdJ("showChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.showreceiverAddressComponent=i)})("submitChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.submitFromreceiverAddress(i))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("show",t.showreceiverAddressComponent)}}let Ze=(()=>{class o{constructor(t,n,i,l,s){this.fb=t,this.invoicesService=n,this.router=i,this.lookupsService=l,this.translate=s,this.showreceiverAddressComponent=!1,this.form=this.fb.group({taxpayerActivityCode:["6190"],type:["B",a.kI.required],id:[null,[a.kI.required]],name:[null,[a.kI.required]],branchAddress:[null,[a.kI.required]],addressView:[{value:null,disabled:!0}],address:[null,[a.kI.required]]}),this.isSubmitted=!1}ngOnInit(){this.taxActivityDropDown$=this.lookupsService.activityTypesDropDown(),this.patchValuesToForm()}patchValuesToForm(){this.invoicesService.issuerReceiverForm.subscribe(t=>{t.submitted&&(this.isSubmitted=t.submitted,this.form.patchValue(t.value),this.form.markAllAsTouched(),this.changePersonType(t.value.type))})}openAddressDetails(){this.showreceiverAddressComponent=!0}submitFromreceiverAddress(t){if(!t)return;let n="";for(const i in t)t[i]&&(n+=t[i]+" , ");this.form.get("addressView")?.patchValue(n),this.form.get("address")?.patchValue(t)}changePersonType(t){t?("B"===t&&this.setToBusiness(),"P"===t&&this.setToPerson(),"F"===t&&this.setToForeigner()):this.form.reset()}setToBusiness(){this.removeValidatorFromControl("id"),this.setValidatorToControl("id",[a.kI.required]),this.setValidatorToControl("branchAddress",[a.kI.required])}setToPerson(){this.removeValidatorFromControl("id"),this.removeValidatorFromControl("branchAddress"),this.setValidatorToControl("id",[a.kI.required,a.kI.pattern("^([1-9]{1})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})[0-9]{3}([0-9]{1})[0-9]{1}$")])}setToForeigner(){this.removeValidatorFromControl("id"),this.removeValidatorFromControl("branchAddress"),this.setValidatorToControl("id",[a.kI.required])}submitForm(t=!0){this.invoicesService.issuerReceiverForm.next({submitted:!0,valid:this.form.valid,value:this.form.getRawValue()}),t&&this.router.navigate(["/add-invoice/line_items"])}setValidatorToControl(t,n){this.form.get(t)?.addValidators(n),this.form.get(t)?.updateValueAndValidity()}removeValidatorFromControl(t){this.form.get(t)?.clearValidators(),this.form.get(t)?.updateValueAndValidity()}ngOnDestroy(){this.submitForm(!1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(m.q),e.Y36(g.F0),e.Y36(b.K),e.Y36(C.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-issuer-receiver"]],decls:86,vars:15,consts:[[1,"mb-5"],["hideToggle","",3,"expanded"],[1,"form",3,"formGroup"],[1,"row","pt-4","pb-2","row-border"],[1,"title"],[1,"row","py-2","pt-4"],[1,"col-md-6"],["for","",1,"mb-2"],["value","1"],["type","text",1,"form-control"],[1,"row","py-2"],["formControlName","taxpayerActivityCode"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"primary"],["formControlName","type",3,"change"],["value","B"],["value","P"],["value","F"],["class","primary",4,"ngIf"],[4,"ngIf"],["type","text","formControlName","name",1,"form-control"],["class","col-md-6",4,"ngIf"],[1,"row"],[1,"mb-2"],[1,"d-flex","align-items-start"],["rows","4","formControlName","addressView",1,"form-control",3,"resize"],[1,"dark-light","px-3","mx-2",3,"click"],[1,"mx-2"],[1,"bi","bi-pencil-square"],[1,"accordion-footer"],[1,"lg"],[1,"dark","lg",3,"click"],[3,"show","showChange","submitChange",4,"ngIf"],[3,"value"],["type","text","formControlName","id",1,"form-control"],["type","text","formControlName","branchAddress",1,"form-control"],[3,"show","showChange","submitChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel",1)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),e._uU(5," Issuer & Recevier "),e.qZA()(),e.TgZ(6,"form",2)(7,"div",3)(8,"div",4),e._uU(9,"Issuer From"),e.qZA()(),e.TgZ(10,"div",5)(11,"div",6)(12,"label",7),e._uU(13,"Title"),e.qZA(),e.TgZ(14,"ng-select")(15,"ng-option",8),e._uU(16,"Main Branch"),e.qZA()()(),e.TgZ(17,"div",6)(18,"label",7),e._uU(19,"Name"),e.qZA(),e._UZ(20,"input",9),e.qZA()(),e.TgZ(21,"div",10)(22,"div",6)(23,"label",7),e._uU(24,"Registration Number"),e.qZA(),e._UZ(25,"input",9),e.qZA(),e.TgZ(26,"div",6)(27,"label",7),e._uU(28,"Tax Activity Code"),e.qZA(),e.TgZ(29,"ng-select",11),e.YNc(30,W,2,2,"ng-option",12),e.ALo(31,"async"),e.qZA()()(),e.TgZ(32,"div",10)(33,"div",13)(34,"label",7),e._uU(35,"Branch Address"),e.qZA(),e._UZ(36,"input",9),e.qZA()(),e.TgZ(37,"div",3)(38,"div",4),e._uU(39,"Receiver To"),e.qZA()(),e.TgZ(40,"div",5)(41,"div",6)(42,"label",7),e._uU(43,"Type "),e.TgZ(44,"span",14),e._uU(45,"*"),e.qZA()(),e.TgZ(46,"ng-select",15),e.NdJ("change",function(l){return n.changePersonType(l)}),e.TgZ(47,"ng-option",16),e._uU(48,"Business"),e.qZA(),e.TgZ(49,"ng-option",17),e._uU(50,"Person"),e.qZA(),e.TgZ(51,"ng-option",18),e._uU(52,"Foreigner"),e.qZA()(),e.YNc(53,ee,2,1,"span",19),e.qZA(),e.TgZ(54,"div",6),e.YNc(55,oe,7,1,"ng-container",20),e.YNc(56,le,7,1,"ng-container",20),e.YNc(57,ce,7,1,"ng-container",20),e.qZA()(),e.TgZ(58,"div",10)(59,"div",6)(60,"label",7),e._uU(61,"Name "),e.TgZ(62,"span",14),e._uU(63,"*"),e.qZA()(),e._UZ(64,"input",21),e.YNc(65,de,2,1,"span",19),e.qZA(),e.YNc(66,ge,7,1,"div",22),e.qZA(),e.TgZ(67,"div",23)(68,"div",13)(69,"label",24),e._uU(70,"Address "),e.TgZ(71,"span",14),e._uU(72,"*"),e.qZA()(),e.TgZ(73,"div",25)(74,"textarea",26),e.NdJ("resize",function(){return!1}),e.qZA(),e.TgZ(75,"button",27),e.NdJ("click",function(){return n.openAddressDetails()}),e.TgZ(76,"span",28),e._uU(77,"Edit"),e.qZA(),e._UZ(78,"i",29),e.qZA()(),e.YNc(79,ve,2,1,"span",19),e.qZA()()(),e.TgZ(80,"div",30)(81,"button",31),e._uU(82,"Close"),e.qZA(),e.TgZ(83,"button",32),e.NdJ("click",function(){return n.submitForm()}),e._uU(84,"Continue"),e.qZA()()()()(),e.YNc(85,xe,1,1,"app-receiver-address",33)),2&t){let i,l,s,c,f,_,x,Z,h;e.xp6(2),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("formGroup",n.form),e.xp6(24),e.Q6J("ngForOf",null==(i=e.lcZ(31,13,n.taxActivityDropDown$))?null:i.data),e.xp6(23),e.Q6J("ngIf",(null==(l=n.form.get("type"))?null:l.invalid)&&(null==(l=n.form.get("type"))?null:l.touched)),e.xp6(2),e.Q6J("ngIf","B"===(null==n.form||null==(s=n.form.get("type"))?null:s.value)),e.xp6(1),e.Q6J("ngIf","P"===(null==n.form||null==(c=n.form.get("type"))?null:c.value)),e.xp6(1),e.Q6J("ngIf","F"===(null==n.form||null==(f=n.form.get("type"))?null:f.value)),e.xp6(8),e.Q6J("ngIf",(null==(_=n.form.get("name"))?null:_.invalid)&&(null==(_=n.form.get("name"))?null:_.touched)),e.xp6(1),e.Q6J("ngIf","B"===(null==n.form||null==(x=n.form.get("type"))?null:x.value)),e.xp6(8),e.ekj("error",(null==(Z=n.form.get("address"))?null:Z.invalid)&&n.isSubmitted),e.xp6(5),e.Q6J("ngIf",(null==(h=n.form.get("address"))?null:h.invalid)&&n.isSubmitted),e.xp6(6),e.Q6J("ngIf",n.showreceiverAddressComponent)}},dependencies:[d.sg,d.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,u.pp,u.ib,u.yz,u.yK,v.w9,v.jq,$,d.Ov],styles:[".mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{background:#ffffff!important;box-shadow:0 4px 4px #00000040!important;border-radius:5px!important}.mat-expansion-panel-header[_ngcontent-%COMP%]{background:#f8f8f8!important;color:#24324d;font-weight:500}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-keyboard-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-program-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]:not(.mat-expanded)   .mat-expansion-panel-header[_ngcontent-%COMP%]:hover:not([aria-disabled=true]){background:#f8f8f8!important}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px!important}.row-border[_ngcontent-%COMP%]{border-bottom:1px solid #dfdfdf}.form[_ngcontent-%COMP%]{padding:0 24px 16px}.accordion-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:15px 24px;margin-top:20px;background:#f8f8f8;border-radius:5px 5px 0 0}"]}),o})();var y=p(5412),he=p(445);function Ce(o,r){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function be(o,r){if(1&o&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t||null==t.value||null==t.value.currency?null:t.value.currency.code," ")}}function Te(o,r){if(1&o&&(e.TgZ(0,"ng-option",28),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t?null:t.code," ")}}function ye(o,r){if(1&o&&(e.TgZ(0,"ng-select",26),e.YNc(1,Te,2,2,"ng-option",27),e.ALo(2,"async"),e.qZA(),e.TgZ(3,"span",25),e._uU(4),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw();let i;e.xp6(1),e.Q6J("ngForOf",null==(i=e.lcZ(2,2,n.allCurrencies$))?null:i.data),e.xp6(3),e.hij(" ",null==t||null==t.value||null==t.value.currency?null:t.value.currency.desc_En," ")}}function Ae(o,r){if(1&o&&(e.TgZ(0,"span",25),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t||null==t.value?null:t.value.rate," ")}}function qe(o,r){1&o&&e._UZ(0,"input",29)}function Ie(o,r){1&o&&(e.ynx(0),e._UZ(1,"i",30),e.BQk())}function Ue(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr",19)(1,"td"),e.YNc(2,be,2,1,"span",20),e.YNc(3,ye,5,4,"ng-template",null,21,e.W1O),e.qZA(),e.TgZ(5,"td"),e.YNc(6,Ae,2,1,"span",20),e.YNc(7,qe,1,0,"ng-template",null,22,e.W1O),e.qZA(),e.TgZ(9,"td",23),e.NdJ("click",function(){const l=e.CHM(t).index,s=e.oxw();return e.KtG(s.deleteRow(l))}),e.YNc(10,Ie,2,0,"ng-container",24),e.qZA()()}if(2&o){const t=r.index,n=e.MAs(4),i=e.MAs(8);e.Q6J("formGroupName",t),e.xp6(2),e.Q6J("ngIf",0==t)("ngIfElse",n),e.xp6(4),e.Q6J("ngIf",0==t)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",0!==t)}}let Oe=(()=>{class o{constructor(t,n,i,l,s){this.dialogRef=t,this.data=n,this.fb=i,this.translate=l,this.lookupsService=s,this.form=new a.cw({currencies:this.fb.array([])}),this.currencyColumns=[{id:"1",name:"Currency"},{id:"2",name:"Exchange Rate"},{id:"",name:""}]}ngOnInit(){this.getAllCurrencies(),this.initCurrenciesForm()}initCurrenciesForm(){for(const t of this.data)this.form.get("currencies").push(this.fb.group({currency:[t.currency,a.kI.required],rate:[t.rate,a.kI.required]}))}get currencies(){return this.form.get("currencies")}newCurrency(){return this.fb.group({currency:[null,a.kI.required],rate:[null,a.kI.required]})}addCurrency(){this.currencies.push(this.newCurrency())}deleteRow(t){0!==t&&this.currencies.removeAt(t)}getAllCurrencies(){this.allCurrencies$=this.lookupsService.currenciesDropDown()}submitForm(){this.dialogRef.close({success:!0,currencies:this.form.value.currencies})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(y.so),e.Y36(y.WI),e.Y36(a.qu),e.Y36(C.sK),e.Y36(b.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-currency-modal"]],decls:28,vars:14,consts:[[1,"dialog-container",3,"dir"],[1,"header-wrapper"],[1,"primary"],["matDialogClose","",1,"icon-wrapper"],[1,"bi","bi-x-lg","primary"],[1,"content-wrapper"],[3,"formGroup"],[1,"table"],[1,"table","table-borderless"],[1,"text-center"],[4,"ngFor","ngForOf"],["formArrayName","currencies",1,"mt-1"],[3,"formGroupName",4,"ngFor","ngForOf"],[2,"background","#F8F8F8"],[1,"add_line",3,"click"],[1,"bi","bi-plus-lg","mx-1"],[1,"footer-wrapper"],["matDialogClose","",1,"default"],[1,"dark",3,"disabled","click"],[3,"formGroupName"],["class","currency-cell",4,"ngIf","ngIfElse"],["currencySelect",""],["currencyRate",""],[1,"trash-icon","primary","cursor-pointer",3,"click"],[4,"ngIf"],[1,"currency-cell"],["formControlName","currency","bindLabel","code"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","formControlName","rate",1,"form-control"],[1,"bi","bi-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"i",4),e.qZA()(),e.TgZ(7,"div",5)(8,"form",6)(9,"div",7)(10,"table",8)(11,"thead",9)(12,"tr"),e.YNc(13,Ce,2,1,"th",10),e.qZA()(),e.TgZ(14,"tbody",11),e.YNc(15,Ue,11,6,"tr",12),e.TgZ(16,"tr",13)(17,"div",14),e.NdJ("click",function(){return n.addCurrency()}),e.TgZ(18,"span"),e._uU(19,"Add Cuurency"),e.qZA(),e._UZ(20,"i",15),e.qZA()()()()()()(),e.TgZ(21,"div",16)(22,"button",17),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"button",18),e.NdJ("click",function(){return n.submitForm()}),e._uU(26),e.ALo(27,"translate"),e.qZA()()()),2&t&&(e.Q6J("dir","ar"===n.translate.currentLang?"rtl":"ltr"),e.xp6(3),e.hij(" ",e.lcZ(4,8,"currency-rates")," "),e.xp6(5),e.Q6J("formGroup",n.form),e.xp6(5),e.Q6J("ngForOf",n.currencyColumns),e.xp6(2),e.Q6J("ngForOf",n.currencies.controls),e.xp6(8),e.hij(" ",e.lcZ(24,10,"cancel")," "),e.xp6(2),e.Q6J("disabled",!n.form.valid),e.xp6(1),e.hij(" ",e.lcZ(27,12,"save")," "))},dependencies:[d.sg,d.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,a.x0,a.CE,he.Lv,y.ZT,v.w9,v.jq,d.Ov,C.X$],styles:[".option-title[_ngcontent-%COMP%]{margin-bottom:0;text-align:start}.option-description[_ngcontent-%COMP%]{font-size:10px;text-align:start;display:block}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{align-items:flex-start}.table[_ngcontent-%COMP%]   ng-select[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.add_line[_ngcontent-%COMP%]{font-weight:500;font-size:14px;padding:0 10px;cursor:pointer}.currency-cell[_ngcontent-%COMP%]{font-size:14px;font-weight:500;padding:0 5px}"]}),o})();var Fe=p(9549),Ne=p(4144),w=p(3805),De=p(3238);const we=["lineDetailsSidenav"];function Pe(o,r){1&o&&e._UZ(0,"app-loader")}function ke(o,r){if(1&o&&(e.TgZ(0,"p",90),e._uU(1),e.ALo(2,"date"),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,null==t?null:t.activeTo)," ")}}function Me(o,r){1&o&&(e.TgZ(0,"p",91),e._uU(1,"Indefinite"),e.qZA())}function Se(o,r){if(1&o&&(e.TgZ(0,"mat-option",81)(1,"div",82)(2,"div",83)(3,"p",84),e._uU(4,"Active To:"),e.qZA(),e.TgZ(5,"div"),e.YNc(6,ke,3,3,"p",85),e.YNc(7,Me,2,0,"ng-template",null,86,e.W1O),e.qZA()(),e.TgZ(9,"div",87)(10,"p",88),e._uU(11),e.qZA(),e.TgZ(12,"p",89),e._uU(13),e.qZA()()()()),2&o){const t=r.$implicit,n=e.MAs(8);e.Q6J("value",t),e.xp6(6),e.Q6J("ngIf",null==t?null:t.activeTo)("ngIfElse",n),e.xp6(5),e.hij(" ",null==t?null:t.parentCodeNamePrimaryLang," "),e.xp6(2),e.AsE(" ",null==t?null:t.codeNamePrimaryLang," - ",null==t?null:t.codeLookupValue," ")}}function Le(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function Je(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Enter Valid Number "),e.qZA())}function Ve(o,r){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,Le,2,0,"span",6),e.YNc(2,Je,2,0,"span",6),e.qZA()),2&o){const t=e.oxw(2);let n,i;e.xp6(1),e.Q6J("ngIf",(null==(n=t.lineDetailsForm.get("quantity"))?null:n.errors).required),e.xp6(1),e.Q6J("ngIf",(null==(i=t.lineDetailsForm.get("quantity"))?null:i.errors).min)}}function Qe(o,r){if(1&o&&(e.TgZ(0,"ng-option",92),e._uU(1),e.qZA()),2&o){const t=r.$implicit,n=e.oxw(2);e.Q6J("value",t),e.xp6(1),e.hij(" ","ar"===n.translate.currentLang&&null!=t&&t.desc_Ar?null==t?null:t.desc_Ar:null==t?null:t.desc_En," ")}}function Ye(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function Re(o,r){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,Ye,2,0,"span",6),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.lineDetailsForm.get("unitType"))?null:n.errors).required)}}function Ge(o,r){if(1&o&&(e.TgZ(0,"ng-option",92),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t||null==t.currency?null:t.currency.code," ")}}function Ee(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function Be(o,r){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,Ee,2,0,"span",6),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.lineDetailsForm.get("currency"))?null:n.errors).required)}}function je(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function He(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Enter Valid Number "),e.qZA())}function Ke(o,r){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,je,2,0,"span",6),e.YNc(2,He,2,0,"span",6),e.qZA()),2&o){const t=e.oxw(2);let n,i;e.xp6(1),e.Q6J("ngIf",(null==(n=t.lineDetailsForm.get("unitPrice"))?null:n.errors).required),e.xp6(1),e.Q6J("ngIf",(null==(i=t.lineDetailsForm.get("unitPrice"))?null:i.errors).min)}}function ze(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function $e(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Enter Valid Number "),e.qZA())}function We(o,r){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,ze,2,0,"span",6),e.YNc(2,$e,2,0,"span",6),e.qZA()),2&o){const t=e.oxw(2);let n,i;e.xp6(1),e.Q6J("ngIf",(null==(n=t.lineDetailsForm.get("totalSales"))?null:n.errors).required),e.xp6(1),e.Q6J("ngIf",(null==(i=t.lineDetailsForm.get("totalSales"))?null:i.errors).min)}}function Xe(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Enter Valid Number "),e.qZA())}function et(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Amount Discount Exceeds the Sales Total Amount "),e.qZA())}function tt(o,r){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,Xe,2,0,"span",6),e.YNc(2,et,2,0,"span",6),e.qZA()),2&o){const t=e.oxw(2);let n,i;e.xp6(1),e.Q6J("ngIf",(null==(n=t.lineDetailsForm.get("discountRate"))?null:n.errors).min),e.xp6(1),e.Q6J("ngIf",(null==(i=t.lineDetailsForm.get("discountRate"))?null:i.errors).exceeds)}}function nt(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Enter Valid Number "),e.qZA())}function ot(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Amount Discount Exceeds the Sales Total Amount "),e.qZA())}function it(o,r){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,nt,2,0,"span",6),e.YNc(2,ot,2,0,"span",6),e.qZA()),2&o){const t=e.oxw(2);let n,i;e.xp6(1),e.Q6J("ngIf",(null==(n=t.lineDetailsForm.get("discountAmount"))?null:n.errors).min),e.xp6(1),e.Q6J("ngIf",(null==(i=t.lineDetailsForm.get("discountAmount"))?null:i.errors).exceeds)}}function rt(o,r){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function at(o,r){if(1&o&&(e.TgZ(0,"ng-option",92),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t?null:t.code," ")}}function lt(o,r){if(1&o&&(e.TgZ(0,"ng-option",92),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t?null:t.code," ")}}function st(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr",93)(1,"td")(2,"ng-select",94),e.NdJ("change",function(){const l=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.taxSelectionChange(l))}),e.YNc(3,at,2,2,"ng-option",49),e.ALo(4,"async"),e.qZA(),e.TgZ(5,"span",95),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"ng-select",96),e.NdJ("change",function(){const l=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.taxSubTypeSelectionChange(l))}),e.YNc(9,lt,2,2,"ng-option",49),e.qZA(),e.TgZ(10,"span",95),e._uU(11),e.qZA()(),e.TgZ(12,"td")(13,"div",54)(14,"input",97),e.NdJ("focusout",function(i){const s=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.setTaxRatioInput(i,s))})("keyup.enter",function(i){const s=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.setTaxRatioInput(i,s))}),e.qZA(),e.TgZ(15,"div",55),e._uU(16,"%"),e.qZA()()(),e.TgZ(17,"td")(18,"div",54)(19,"input",98),e.NdJ("focusout",function(i){const s=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.setTaxAmountInput(i,s))})("keyup.enter",function(i){const s=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.setTaxAmountInput(i,s))}),e.qZA(),e.TgZ(20,"div",55),e._uU(21),e.qZA()()(),e.TgZ(22,"td",99),e.NdJ("click",function(){const l=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.deleteRow(l))}),e._UZ(23,"i",100),e.qZA()()}if(2&o){const t=r.$implicit,n=r.index,i=e.oxw(2);let l;e.Q6J("formGroupName",n),e.xp6(3),e.Q6J("ngForOf",null==(l=e.lcZ(4,6,i.taxTypesDropDown$))?null:l.data),e.xp6(3),e.hij(" ","ar"===i.translate.currentLang?null==t||null==t.value||null==t.value.taxType?null:t.value.taxType.desc_Ar:null==t||null==t.value||null==t.value.taxType?null:t.value.taxType.desc_En," "),e.xp6(3),e.Q6J("ngForOf",null==t||null==t.value||null==t.value.taxType?null:t.value.taxType.taxSubTypes),e.xp6(2),e.hij(" ","ar"===i.translate.currentLang?null==t||null==t.value||null==t.value.taxSubType?null:t.value.taxSubType.desc_Ar:null==t||null==t.value||null==t.value.taxSubType?null:t.value.taxSubType.desc_En," "),e.xp6(10),e.hij(" ",null!=i.selectedCurrency&&null!=i.selectedCurrency.currency&&i.selectedCurrency.currency.code?null==i.selectedCurrency||null==i.selectedCurrency.currency?null:i.selectedCurrency.currency.code:"EGP"," ")}}function ut(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Enter Valid Number "),e.qZA())}function ct(o,r){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,ut,2,0,"span",6),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.lineDetailsForm.get("totalTaxableFees"))?null:n.errors).min)}}function pt(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Enter Valid Number "),e.qZA())}function dt(o,r){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,pt,2,0,"span",6),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.lineDetailsForm.get("valueDifference"))?null:n.errors).min)}}function mt(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Enter Valid Number "),e.qZA())}function _t(o,r){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,mt,2,0,"span",6),e.qZA()),2&o){const t=e.oxw(2);let n;e.xp6(1),e.Q6J("ngIf",(null==(n=t.lineDetailsForm.get("itemsDiscount"))?null:n.errors).min)}}function gt(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function ft(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Enter Valid Number "),e.qZA())}function vt(o,r){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,gt,2,0,"span",6),e.YNc(2,ft,2,0,"span",6),e.qZA()),2&o){const t=e.oxw(2);let n,i;e.xp6(1),e.Q6J("ngIf",(null==(n=t.lineDetailsForm.get("netTotal"))?null:n.errors).required),e.xp6(1),e.Q6J("ngIf",(null==(i=t.lineDetailsForm.get("netTotal"))?null:i.errors).min)}}function xt(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1,"Field is required"),e.qZA())}function Zt(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," Enter Valid Number "),e.qZA())}function ht(o,r){if(1&o&&(e.TgZ(0,"span",17),e.YNc(1,xt,2,0,"span",6),e.YNc(2,Zt,2,0,"span",6),e.qZA()),2&o){const t=e.oxw(2);let n,i;e.xp6(1),e.Q6J("ngIf",(null==(n=t.lineDetailsForm.get("total"))?null:n.errors).required),e.xp6(1),e.Q6J("ngIf",(null==(i=t.lineDetailsForm.get("total"))?null:i.errors).min)}}function Ct(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"form",14)(1,"div",15)(2,"label",16),e._uU(3,"Item Code "),e.TgZ(4,"span",17),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"div",18)(7,"div",19)(8,"div",20)(9,"ng-select",21),e.NdJ("change",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.changeItemType(i))}),e.TgZ(10,"ng-option",22),e._uU(11,"GS1"),e.qZA(),e.TgZ(12,"ng-option",23),e._uU(13,"EGS"),e.qZA()()(),e.TgZ(14,"mat-form-field",24),e._UZ(15,"input",25),e.TgZ(16,"mat-autocomplete",26,27),e.NdJ("optionSelected",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.changeItem(i))}),e.YNc(18,Se,14,6,"mat-option",28),e.qZA()(),e.TgZ(19,"button",29),e._UZ(20,"i",30),e.qZA()(),e.TgZ(21,"div",31),e.O4$(),e.TgZ(22,"svg",32),e._UZ(23,"path",33)(24,"path",34)(25,"path",35)(26,"path",36)(27,"path",37)(28,"path",38),e.qZA(),e.kcU(),e.TgZ(29,"span",39),e._uU(30,"Broswe"),e.qZA()()()(),e.TgZ(31,"div",15)(32,"div",40)(33,"label",41),e._uU(34,"Product Or Service"),e.qZA(),e._UZ(35,"input",42),e.qZA()(),e.TgZ(36,"div",15)(37,"div",40)(38,"label",16),e._uU(39,"Internal Code"),e.qZA(),e._UZ(40,"input",43),e.qZA()(),e.TgZ(41,"div",15)(42,"div",40)(43,"label",16),e._uU(44,"Item Description "),e.TgZ(45,"span",17),e._uU(46,"*"),e.qZA()(),e._UZ(47,"input",44),e.qZA()(),e.TgZ(48,"div",15)(49,"div",45)(50,"label",16),e._uU(51," Quantity "),e.TgZ(52,"span",17),e._uU(53,"*"),e.qZA()(),e.TgZ(54,"input",46),e.NdJ("focusout",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.setQuantityInput(i))})("keyup.enter",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.setQuantityInput(i))}),e.qZA(),e.YNc(55,Ve,3,2,"span",47),e.qZA(),e.TgZ(56,"div",45)(57,"label",16),e._uU(58," Unit "),e.TgZ(59,"span",17),e._uU(60,"*"),e.qZA()(),e.TgZ(61,"ng-select",48),e.YNc(62,Qe,2,2,"ng-option",49),e.ALo(63,"async"),e.qZA(),e.YNc(64,Re,2,1,"span",47),e.qZA()(),e.TgZ(65,"div",15)(66,"div",45)(67,"label",16),e._uU(68," Currency "),e.TgZ(69,"span",17),e._uU(70,"*"),e.qZA()(),e.TgZ(71,"ng-select",50),e.NdJ("change",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.openAddCurrencyModal(i))}),e.YNc(72,Ge,2,2,"ng-option",49),e.TgZ(73,"ng-option",51),e._UZ(74,"i",52),e._uU(75," Add Foreign Currency "),e.qZA()(),e.YNc(76,Be,2,1,"span",47),e.qZA(),e.TgZ(77,"div",53)(78,"label",16),e._uU(79,"Unit Price EGP "),e.TgZ(80,"span",17),e._uU(81,"*"),e.qZA()(),e.TgZ(82,"div",54)(83,"div",55),e._uU(84),e.qZA(),e.TgZ(85,"input",56),e.NdJ("focusout",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.setUnitPriceInput(i))})("keyup.enter",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.setUnitPriceInput(i))}),e.qZA()(),e.YNc(86,Ke,3,2,"span",47),e.qZA()(),e.TgZ(87,"div",15)(88,"div",40)(89,"label",57),e._uU(90," Total Sales Amount "),e.qZA(),e.TgZ(91,"div",54)(92,"div",55),e._uU(93),e.qZA(),e._UZ(94,"input",58),e.TgZ(95,"button",29),e._UZ(96,"i",59),e.qZA()(),e.YNc(97,We,3,2,"span",47),e.qZA()(),e.TgZ(98,"div",15)(99,"label",16),e._uU(100," Discount "),e.qZA(),e.TgZ(101,"div",45)(102,"div",54)(103,"input",60),e.NdJ("focusout",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.setDiscountRateInput(i))})("keyup.enter",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.setDiscountRateInput(i))}),e.qZA(),e.TgZ(104,"div",55),e._uU(105,"%"),e.qZA()(),e.YNc(106,tt,3,2,"span",47),e.qZA(),e.TgZ(107,"div",45)(108,"div",54)(109,"input",61),e.NdJ("focusout",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.setDiscountAmountInput(i))})("keyup.enter",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.setDiscountAmountInput(i))}),e.qZA(),e.TgZ(110,"div",55),e._uU(111),e.qZA()(),e.YNc(112,it,3,2,"span",47),e.qZA()(),e.TgZ(113,"div",62)(114,"div",63)(115,"div",64),e._uU(116,"Taxes"),e.qZA(),e.TgZ(117,"div",65)(118,"div",66)(119,"span"),e._uU(120,"View Guidance"),e.qZA(),e._UZ(121,"i",67),e.qZA(),e.TgZ(122,"div",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addRowTax())}),e.TgZ(123,"span"),e._uU(124,"Add Tax"),e.qZA(),e._UZ(125,"i",52),e.qZA()()()(),e.TgZ(126,"div",69)(127,"div",70)(128,"table",71)(129,"thead",72)(130,"tr"),e.YNc(131,rt,2,1,"th",73),e.qZA()(),e.TgZ(132,"tbody",74),e.YNc(133,st,24,8,"tr",75),e.qZA()()()(),e.TgZ(134,"div",15)(135,"div",40)(136,"div",64),e._uU(137,"Line Totals"),e.qZA()()(),e.TgZ(138,"div",15)(139,"div",40)(140,"label",16),e._uU(141," Total Taxable Fees "),e.qZA(),e.TgZ(142,"div",54)(143,"div",55),e._uU(144),e.qZA(),e._UZ(145,"input",76),e.TgZ(146,"button",29),e._UZ(147,"i",59),e.qZA()(),e.YNc(148,ct,2,1,"span",47),e.qZA()(),e.TgZ(149,"div",15)(150,"div",53)(151,"label",16),e._uU(152," Value Difference "),e.qZA(),e.TgZ(153,"div",54)(154,"div",55),e._uU(155),e.qZA(),e._UZ(156,"input",77),e.qZA(),e.YNc(157,dt,2,1,"span",47),e.qZA(),e.TgZ(158,"div",53)(159,"label",16),e._uU(160," Items Discount (after tax) "),e.qZA(),e.TgZ(161,"div",54)(162,"div",55),e._uU(163),e.qZA(),e._UZ(164,"input",78),e.qZA(),e.YNc(165,_t,2,1,"span",47),e.qZA()(),e.TgZ(166,"div",15)(167,"div",45)(168,"label",57),e._uU(169," Net Total "),e.TgZ(170,"span",17),e._uU(171,"*"),e.qZA()(),e.TgZ(172,"div",54)(173,"div",55),e._uU(174),e.qZA(),e._UZ(175,"input",79),e.TgZ(176,"button",29),e._UZ(177,"i",59),e.qZA()(),e.YNc(178,vt,3,2,"span",47),e.qZA(),e.TgZ(179,"div",45)(180,"label",57),e._uU(181," Total Amount "),e.TgZ(182,"span",17),e._uU(183,"*"),e.qZA()(),e.TgZ(184,"div",54)(185,"div",55),e._uU(186),e.qZA(),e._UZ(187,"input",80),e.TgZ(188,"button",29),e._UZ(189,"i",59),e.qZA()(),e.YNc(190,ht,3,2,"span",47),e.qZA()()()}if(2&o){const t=e.MAs(17),n=e.oxw();let i,l,s,c,f,_,x,Z,h,A,q,I,U;e.Q6J("formGroup",n.lineDetailsForm),e.xp6(15),e.Q6J("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",n.displayAutoComplete),e.xp6(2),e.Q6J("ngForOf",n.itemsCodes),e.xp6(37),e.Q6J("ngIf",(null==(i=n.lineDetailsForm.get("quantity"))?null:i.invalid)&&(null==(i=n.lineDetailsForm.get("quantity"))?null:i.touched)),e.xp6(7),e.Q6J("ngForOf",null==(l=e.lcZ(63,28,n.unitTypesDropDown$))?null:l.data),e.xp6(2),e.Q6J("ngIf",(null==(s=n.lineDetailsForm.get("unitType"))?null:s.invalid)&&(null==(s=n.lineDetailsForm.get("unitType"))?null:s.touched)),e.xp6(8),e.Q6J("ngForOf",n.currencies),e.xp6(4),e.Q6J("ngIf",(null==(c=n.lineDetailsForm.get("currency"))?null:c.invalid)&&(null==(c=n.lineDetailsForm.get("currency"))?null:c.touched)),e.xp6(8),e.hij(" ",null!=n.selectedCurrency&&null!=n.selectedCurrency.currency&&n.selectedCurrency.currency.code?null==n.selectedCurrency||null==n.selectedCurrency.currency?null:n.selectedCurrency.currency.code:"EGP"," "),e.xp6(2),e.Q6J("ngIf",(null==(f=n.lineDetailsForm.get("unitPrice"))?null:f.invalid)&&(null==(f=n.lineDetailsForm.get("unitPrice"))?null:f.touched)),e.xp6(7),e.hij(" ",null!=n.selectedCurrency&&null!=n.selectedCurrency.currency&&n.selectedCurrency.currency.code?null==n.selectedCurrency||null==n.selectedCurrency.currency?null:n.selectedCurrency.currency.code:"EGP"," "),e.xp6(4),e.Q6J("ngIf",(null==(_=n.lineDetailsForm.get("totalSales"))?null:_.invalid)&&(null==(_=n.lineDetailsForm.get("totalSales"))?null:_.touched)),e.xp6(9),e.Q6J("ngIf",(null==(x=n.lineDetailsForm.get("discountRate"))?null:x.invalid)&&(null==(x=n.lineDetailsForm.get("discountRate"))?null:x.touched)),e.xp6(5),e.hij(" ",null!=n.selectedCurrency&&null!=n.selectedCurrency.currency&&n.selectedCurrency.currency.code?null==n.selectedCurrency||null==n.selectedCurrency.currency?null:n.selectedCurrency.currency.code:"EGP"," "),e.xp6(1),e.Q6J("ngIf",(null==(Z=n.lineDetailsForm.get("discountAmount"))?null:Z.invalid)&&(null==(Z=n.lineDetailsForm.get("discountAmount"))?null:Z.touched)),e.xp6(19),e.Q6J("ngForOf",n.taxColumns),e.xp6(2),e.Q6J("ngForOf",null==n.taxes?null:n.taxes.controls),e.xp6(11),e.hij(" ",null!=n.selectedCurrency&&null!=n.selectedCurrency.currency&&n.selectedCurrency.currency.code?null==n.selectedCurrency||null==n.selectedCurrency.currency?null:n.selectedCurrency.currency.code:"EGP"," "),e.xp6(4),e.Q6J("ngIf",(null==(h=n.lineDetailsForm.get("totalTaxableFees"))?null:h.invalid)&&(null==(h=n.lineDetailsForm.get("totalTaxableFees"))?null:h.touched)),e.xp6(7),e.hij(" ",null!=n.selectedCurrency&&null!=n.selectedCurrency.currency&&n.selectedCurrency.currency.code?null==n.selectedCurrency||null==n.selectedCurrency.currency?null:n.selectedCurrency.currency.code:"EGP"," "),e.xp6(2),e.Q6J("ngIf",(null==(A=n.lineDetailsForm.get("valueDifference"))?null:A.invalid)&&(null==(A=n.lineDetailsForm.get("valueDifference"))?null:A.touched)),e.xp6(6),e.hij(" ",null!=n.selectedCurrency&&null!=n.selectedCurrency.currency&&n.selectedCurrency.currency.code?null==n.selectedCurrency||null==n.selectedCurrency.currency?null:n.selectedCurrency.currency.code:"EGP"," "),e.xp6(2),e.Q6J("ngIf",(null==(q=n.lineDetailsForm.get("itemsDiscount"))?null:q.invalid)&&(null==(q=n.lineDetailsForm.get("itemsDiscount"))?null:q.touched)),e.xp6(9),e.hij(" ",null!=n.selectedCurrency&&null!=n.selectedCurrency.currency&&n.selectedCurrency.currency.code?null==n.selectedCurrency||null==n.selectedCurrency.currency?null:n.selectedCurrency.currency.code:"EGP"," "),e.xp6(4),e.Q6J("ngIf",(null==(I=n.lineDetailsForm.get("netTotal"))?null:I.invalid)&&(null==(I=n.lineDetailsForm.get("netTotal"))?null:I.touched)),e.xp6(8),e.hij(" ",null!=n.selectedCurrency&&null!=n.selectedCurrency.currency&&n.selectedCurrency.currency.code?null==n.selectedCurrency||null==n.selectedCurrency.currency?null:n.selectedCurrency.currency.code:"EGP"," "),e.xp6(4),e.Q6J("ngIf",(null==(U=n.lineDetailsForm.get("total"))?null:U.invalid)&&(null==(U=n.lineDetailsForm.get("total"))?null:U.touched))}}function bt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",101),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submitFormAndClose())}),e._uU(1," Add "),e._UZ(2,"i",102),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",!t.lineDetailsForm.valid)}}function Tt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",103),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateLine())}),e._uU(1,"Edit"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",!t.lineDetailsForm.valid||!t.lineDetailsForm.dirty)}}const yt=function(o){return{"d-none":o}};let At=(()=>{class o{constructor(t,n,i,l,s,c){this.cdr=t,this.lookupsService=n,this.translate=i,this.fb=l,this.dialog=s,this.invoiceService=c,this.privateShow=!1,this.showChange=new e.vpe,this.submitChange=new e.vpe,this.selectedTax=null,this.itemsCodes=[],this.isLoading=!1,this.taxColumns=[{id:"1",name:"Type"},{id:"2",name:"Sub Type"},{id:"3",name:"Rate"},{id:"4",name:"Amount EGP"},{id:"",name:""}],this.currencies=[{currency:{code:"EGP",desc_En:"Egyptian Pound"},rate:"1"}],this.lineDetailsForm=this.fb.group({itemType:["GS1",[a.kI.required]],itemCode:[null,[a.kI.required]],productOrService:[{value:"",disabled:!0}],internalCode:[null],itemDescription:[null,[a.kI.required]],quantity:[null,[a.kI.required,a.kI.min(0)]],unitType:[null,[a.kI.required]],currency:[this.currencies[0]],unitPrice:[null,[a.kI.required,a.kI.min(0)]],totalSales:[{value:null,disabled:!0},[a.kI.min(0)]],discountRate:[null,[a.kI.min(0)]],discountAmount:[null,[a.kI.min(0)]],taxableItems:this.fb.array([]),totalTaxableFees:[{value:null,disabled:!0},[a.kI.min(0)]],valueDifference:[{value:null,disabled:!0},[a.kI.min(0)]],itemsDiscount:[{value:null,disabled:!0},[a.kI.min(0)]],netTotal:[{value:null,disabled:!0},[a.kI.required,a.kI.min(0)]],total:[{value:null,disabled:!0},[a.kI.required,a.kI.min(0)]]})}get show(){return this.privateShow}set show(t){this.privateShow=t,this.privateShow||(this.sidenav.close(),document.body.style.position=""),this.showChange.emit(this.privateShow)}ngOnInit(){this.unitTypesDropDown$=this.lookupsService.unitTypesDropDown(),this.taxTypesDropDown$=this.lookupsService.taxTypesDropDown(),this.getItemsCodes(),this.patchEditItemToForm()}ngAfterViewInit(){this.privateShow?(this.sidenav.open(),document.body.style.position="fixed"):document.body.style.position="",this.cdr.detectChanges()}patchEditItemToForm(){if(this.editedLine){this.lineDetailsForm.patchValue({...this.editedLine.item,currency:this.currencies[0],unitType:this.editedLine.item.unitType});for(const t of this.editedLine.item.taxableItems)this.lineDetailsForm.get("taxableItems").push(this.fb.group({taxType:[t.taxType,a.kI.required],taxSubType:[t.taxSubType,a.kI.required],rate:[t.rate,[a.kI.required,a.kI.min(0)]],amount:[t.amount,[a.kI.required,a.kI.min(0)]]}))}}getItemsCodes(){this.isLoading=!0;let t={PageNumber:1,PageSize:10,CodeType:this.lineDetailsForm.get("itemType")?.value};this.invoiceService.getItemsCodes(t).subscribe(n=>{this.itemsCodes=n.data.result,this.isLoading=!1})}closeSideNav(){this.sidenav.close(),this.show=!1}submitFormAndClose(){this.submitChange.emit(this.lineDetailsForm.getRawValue()),this.show=!1,this.sidenav.close()}submitFormAndNew(){this.submitChange.emit(this.lineDetailsForm.getRawValue()),this.lineDetailsForm.reset()}updateLine(){this.submitChange.emit({editMode:!0,index:this.editedLine.index,item:this.lineDetailsForm.getRawValue()}),this.show=!1,this.sidenav.close()}get taxes(){return this.lineDetailsForm.get("taxableItems")}newTax(){return this.fb.group({taxType:[null,a.kI.required],taxSubType:[null,a.kI.required],rate:[null,[a.kI.required,a.kI.min(0)]],amount:[null,[a.kI.required,a.kI.min(0)]]})}addRowTax(){1!==this.taxes.value.length&&this.taxes.push(this.newTax())}deleteRow(t){this.taxes.removeAt(t)}changeItem(t){this.lineDetailsForm.get("productOrService")?.patchValue(t.option.value.codeNamePrimaryLang),this.lineDetailsForm.get("itemDescription")?.patchValue(t.option.value.codeDescriptionPrimaryLang)}changeItemType(t){this.lineDetailsForm?.reset(),this.lineDetailsForm?.get("itemType")?.patchValue(t),this.getItemsCodes()}taxSelectionChange(t){t.get("taxSubType")?.reset(),t.get("rate")?.disable(),t.get("amount")?.disable()}taxSubTypeSelectionChange(t){if(!t.value.taxSubType)return t.get("rate")?.disable(),void t.get("amount")?.disable();t.value.taxSubType.hasRate?t.get("rate")?.enable():t.get("rate")?.disable(),t.value.taxSubType.hasAmount?t.get("amount")?.enable():t.get("amount")?.disable(),!t.value.taxSubType.hasRate&&!t.value.taxSubType.hasAmount&&(t.get("rate")?.enable(),t.get("amount")?.enable()),t.get("rate")?.reset(),t.get("amount")?.reset()}openAddCurrencyModal(t){"add"===t?(this.selectedCurrency?this.lineDetailsForm.get("currency")?.patchValue(this.selectedCurrency):this.lineDetailsForm.get("currency")?.reset(),this.dialog.open(Oe,{data:this.currencies,panelClass:"modal-class"}).afterClosed().subscribe(n=>{n.success&&(this.currencies=n.currencies,this.lineDetailsForm.get("currency")?.reset())})):(this.selectedCurrency=t,this.selectedCurrency&&this.invoiceService.selectedCurrency.next(this.selectedCurrency.currency.code))}displayAutoComplete(t){if(t)return t.codeLookupValue}setQuantityInput(t){!t.target.value||+t.target.value<0||(this.lineDetailsForm.get("quantity")?.patchValue(this.makeNumberDecimal(t.target.value)),this.calculateTotalSalesAmount())}setUnitPriceInput(t){!t.target.value||+t.target.value<0||(this.lineDetailsForm.get("unitPrice")?.patchValue(this.makeNumberDecimal(t.target.value)),this.calculateTotalSalesAmount())}calculateTotalSalesAmount(){let t=this.lineDetailsForm.get("quantity")?.value,n=this.lineDetailsForm.get("unitPrice")?.value;t&&t>0&&n&&n>0&&(this.lineDetailsForm.get("totalSales")?.patchValue(this.makeNumberDecimal(+t*+n)),this.lineDetailsForm.get("netTotal")?.patchValue(this.makeNumberDecimal(+t*+n)),this.lineDetailsForm.get("total")?.patchValue(this.makeNumberDecimal(+t*+n)))}setDiscountRateInput(t){if(!t.target.value||+t.target.value<0)return;this.lineDetailsForm.get("discountRate")?.patchValue(this.makeNumberDecimal(t.target.value));let n=+this.lineDetailsForm.get("totalSales")?.value;n&&n>0&&(+t.target.value>100?this.lineDetailsForm.get("discountRate")?.setErrors({exceeds:!0}):(this.lineDetailsForm.get("discountRate")?.setErrors({exceeds:!1}),this.lineDetailsForm.get("discountRate")?.updateValueAndValidity(),this.lineDetailsForm.get("discountAmount")?.patchValue(this.makeNumberDecimal(t.target.value/100*n)),this.setNetTotal()))}setDiscountAmountInput(t){if(!t.target.value||+t.target.value<0)return;this.lineDetailsForm.get("discountAmount")?.patchValue(this.makeNumberDecimal(t.target.value));let n=+this.lineDetailsForm.get("totalSales")?.value;n&&n>0&&(+t.target.value>n?this.lineDetailsForm.get("discountAmount")?.setErrors({exceeds:!0}):(this.lineDetailsForm.get("discountAmount")?.setErrors({exceeds:!1}),this.lineDetailsForm.get("discountAmount")?.updateValueAndValidity(),this.lineDetailsForm.get("discountRate")?.patchValue(this.makeNumberDecimal(t.target.value/n*100)),this.setNetTotal()))}setTaxRatioInput(t,n){if(!t.target.value||+t.target.value<0)return;let i=this.taxes.controls[n];i.get("rate")?.patchValue(this.makeNumberDecimal(t.target.value));let l=+this.lineDetailsForm.get("netTotal")?.value;l&&l>0&&(+t.target.value>100?i.get("rate")?.setErrors({exceeds:!0}):(i.get("rate")?.setErrors({exceeds:!1}),i.get("rate")?.updateValueAndValidity(),i.get("amount")?.patchValue(this.makeNumberDecimal(t.target.value/100*l)),this.setNetTotal()))}setTaxAmountInput(t,n){if(!t.target.value||+t.target.value<0)return;let i=this.taxes.controls[n];i.get("amount")?.patchValue(this.makeNumberDecimal(t.target.value));let l=+this.lineDetailsForm.get("netTotal")?.value;l&&l>0&&(+t.target.value>l?i.get("amount")?.setErrors({exceeds:!0}):(i.get("amount")?.setErrors({exceeds:!1}),i.get("amount")?.updateValueAndValidity(),i.get("rate")?.patchValue(this.makeNumberDecimal(t.target.value/l*100)),this.setNetTotal()))}setNetTotal(){let i=+this.lineDetailsForm.get("totalSales")?.value-+this.lineDetailsForm.get("discountAmount")?.value;this.lineDetailsForm.get("netTotal")?.patchValue(this.makeNumberDecimal(i)),this.setTotalAmount()}setTotalAmount(){let t=+this.lineDetailsForm.get("netTotal")?.value;if(this.taxes.length>0){let n=+this.taxes.controls.reduce((i,l)=>l.getRawValue().amount,0);this.lineDetailsForm.get("total")?.patchValue(this.makeNumberDecimal(t+n))}else this.lineDetailsForm.get("total")?.patchValue(this.makeNumberDecimal(t))}makeNumberDecimal(t){return t.toString().split("."),Number(t).toFixed(2)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(b.K),e.Y36(C.sK),e.Y36(a.qu),e.Y36(y.uw),e.Y36(m.q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-line-details"]],viewQuery:function(t,n){if(1&t&&e.Gf(we,5),2&t){let i;e.iGM(i=e.CRH())&&(n.sidenav=i.first)}},inputs:{editedLine:"editedLine",show:"show"},outputs:{showChange:"showChange",submitChange:"submitChange"},decls:18,vars:12,consts:[[1,"example-container",3,"hasBackdrop","autosize","ngClass"],["sidenav",""],["mode","side","position","end","disableClose","true",1,"filterSideNav",3,"opened","fixedInViewport"],["lineDetailsSidenav",""],[1,"header"],[1,"content"],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"footer"],[3,"click"],[1,"d-flex"],[1,"dark-light","mx-2",3,"disabled","click"],["class","dark",3,"disabled","click",4,"ngIf"],["class","dark edit-btn",3,"disabled","click",4,"ngIf"],[3,"formGroup"],[1,"row"],["for","",1,"mt-3","mb-2"],[1,"primary"],[1,"d-flex","align-items-center"],[1,"input-group","mb-3"],[1,"input-group-text","currency-box","with-drop-down","no-padding"],["formControlName","itemType",1,"dropdown",3,"change"],["value","GS1"],["value","EGS"],["appearance","outline",1,"line-autocomplete"],["type","text","placeholder","Search in items","matInput","","formControlName","itemCode",3,"matAutocomplete"],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],["class","line-autocomplete-option",3,"value",4,"ngFor","ngForOf"],[1,"input-group-text","dark-light"],[1,"bi","bi-funnel"],[1,"cursor-pointer"],["width","20","height","16","viewBox","0 0 20 16","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M1.21094 13.8636C1.12806 13.8636 1.04857 13.8307 0.989967 13.7721C0.931362 13.7135 0.898438 13.634 0.898438 13.5511V4.3355C0.898954 3.9138 1.0667 3.50952 1.36489 3.21133C1.66308 2.91314 2.06736 2.74539 2.48906 2.74487H15.3406C15.7623 2.74539 16.1666 2.91314 16.4648 3.21133C16.763 3.50952 16.9307 3.9138 16.9312 4.3355V4.88667C16.9312 4.96955 16.8983 5.04904 16.8397 5.10764C16.7811 5.16625 16.7016 5.19917 16.6187 5.19917C16.5359 5.19917 16.4564 5.16625 16.3978 5.10764C16.3392 5.04904 16.3062 4.96955 16.3062 4.88667V4.3355C16.3059 4.07949 16.2041 3.83406 16.0231 3.65304C15.8421 3.47202 15.5966 3.37018 15.3406 3.36987H2.48906C2.23306 3.37018 1.98763 3.47202 1.8066 3.65304C1.62558 3.83406 1.52375 4.07949 1.52344 4.3355V13.5511C1.52344 13.634 1.49051 13.7135 1.43191 13.7721C1.3733 13.8307 1.29382 13.8636 1.21094 13.8636Z","fill","#00648B"],["d","M16.0879 15.1418H2.47695C2.05846 15.1413 1.65726 14.9748 1.36134 14.6789C1.06543 14.383 0.898954 13.9818 0.898438 13.5633C0.898433 13.5433 0.900396 13.5235 0.904297 13.5039L2.33359 6.12109C2.34237 5.70811 2.51249 5.31499 2.80752 5.02587C3.10254 4.73676 3.49904 4.57464 3.91211 4.57422H17.523C17.9416 4.57463 18.3428 4.74107 18.6388 5.03701C18.9347 5.33295 19.1011 5.73421 19.1016 6.15273C19.1016 6.17267 19.0996 6.19256 19.0957 6.21211L17.6664 13.5949C17.6575 14.0079 17.4874 14.4009 17.1924 14.69C16.8974 14.9791 16.5009 15.1413 16.0879 15.1418ZM1.52344 13.591C1.53095 13.8389 1.63462 14.0741 1.81252 14.2469C1.99041 14.4197 2.22856 14.5165 2.47656 14.5168H16.0879C16.3407 14.5165 16.5831 14.4159 16.7619 14.2372C16.9407 14.0585 17.0414 13.8161 17.0418 13.5633C17.0417 13.5434 17.0435 13.5235 17.0473 13.5039L18.4766 6.125C18.469 5.87718 18.3652 5.64205 18.1874 5.46934C18.0095 5.29663 17.7714 5.1999 17.5234 5.19961H3.91211C3.65928 5.19992 3.41689 5.30047 3.23808 5.47921C3.05926 5.65795 2.95862 5.9003 2.9582 6.15312C2.95834 6.17305 2.95651 6.19294 2.95273 6.2125L1.52344 13.591Z","fill","#00648B"],["d","M10.8252 3.36987H2.48926C2.40638 3.36987 2.32689 3.33695 2.26829 3.27834C2.20968 3.21974 2.17676 3.14025 2.17676 3.05737V2.00269C2.17748 1.69916 2.29846 1.40828 2.5132 1.19376C2.72793 0.979246 3.01893 0.858567 3.32246 0.858154H8.65176C8.72731 0.858547 8.80017 0.886302 8.85684 0.936279L11.0299 2.823C11.0774 2.86487 11.111 2.92017 11.1264 2.98159C11.1417 3.043 11.1381 3.10763 11.1159 3.16692C11.0937 3.22621 11.054 3.27736 11.0021 3.3136C10.9502 3.34984 10.8885 3.36947 10.8252 3.36987ZM2.80176 2.74487H9.98926L8.53613 1.48315H3.32246C3.18443 1.48336 3.0521 1.53829 2.9545 1.63589C2.85689 1.7335 2.80196 1.86582 2.80176 2.00386V2.74487Z","fill","#00648B"],["d","M8.31991 10.6792C7.74155 10.6791 7.18112 10.4785 6.73409 10.1115C6.28706 9.74456 5.98109 9.23395 5.86831 8.66669C5.75553 8.09944 5.84292 7.51062 6.11558 7.00057C6.38825 6.49052 6.82933 6.09079 7.36367 5.86947C7.89801 5.64816 8.49256 5.61896 9.04601 5.78684C9.59947 5.95473 10.0776 6.30932 10.3989 6.79019C10.7203 7.27107 10.8649 7.84848 10.8083 8.42406C10.7516 8.99964 10.4972 9.53777 10.0883 9.94678C9.85657 10.1797 9.58098 10.3644 9.27745 10.4901C8.97391 10.6158 8.64845 10.6801 8.31991 10.6792ZM8.31991 6.3042C7.88622 6.30472 7.46612 6.45557 7.13116 6.73105C6.7962 7.00653 6.5671 7.38961 6.48287 7.81505C6.39864 8.24048 6.4645 8.68196 6.66922 9.06429C6.87394 9.44662 7.20487 9.74616 7.60565 9.91189C8.00642 10.0776 8.45226 10.0993 8.86722 9.97323C9.28219 9.84716 9.64061 9.58113 9.88146 9.22046C10.1223 8.8598 10.2307 8.42679 10.1881 7.99519C10.1456 7.56359 9.95469 7.1601 9.64804 6.85342C9.47416 6.67824 9.26722 6.53934 9.03923 6.44479C8.81124 6.35024 8.56673 6.30192 8.31991 6.30264V6.3042Z","fill","#00648B"],["d","M10.5781 10.7487C10.5371 10.7488 10.4964 10.7407 10.4585 10.725C10.4205 10.7093 10.3861 10.6863 10.357 10.6573L9.64804 9.94677C9.6178 9.91804 9.59362 9.88355 9.57692 9.84533C9.56022 9.8071 9.55134 9.76592 9.55081 9.72421C9.55027 9.68251 9.55809 9.64111 9.57381 9.60248C9.58952 9.56384 9.61282 9.52874 9.64231 9.49924C9.6718 9.46975 9.70691 9.44646 9.74554 9.43074C9.78418 9.41503 9.82557 9.40721 9.86728 9.40774C9.90899 9.40827 9.95017 9.41715 9.98839 9.43385C10.0266 9.45055 10.0611 9.47473 10.0898 9.50497L10.8 10.2151C10.8437 10.2588 10.8735 10.3145 10.8856 10.3751C10.8977 10.4357 10.8915 10.4985 10.8679 10.5557C10.8443 10.6128 10.8043 10.6616 10.7529 10.696C10.7015 10.7303 10.6411 10.7487 10.5793 10.7487H10.5781Z","fill","#00648B"],["d","M13.0135 14.0374C12.8601 14.0379 12.7081 14.008 12.5663 13.9495C12.4245 13.891 12.2957 13.8049 12.1874 13.6964L9.75181 11.2612C9.72275 11.2322 9.6997 11.1977 9.68398 11.1598C9.66825 11.1219 9.66016 11.0812 9.66016 11.0401C9.66016 10.9991 9.66825 10.9584 9.68398 10.9205C9.6997 10.8825 9.72275 10.8481 9.75181 10.819L10.9596 9.61123C11.0182 9.55267 11.0977 9.51978 11.1805 9.51978C11.2634 9.51978 11.3428 9.55267 11.4014 9.61123L13.837 12.0468C14.0006 12.2098 14.1122 12.4177 14.1575 12.6443C14.2028 12.8708 14.1798 13.1057 14.0914 13.3191C14.0031 13.5325 13.8533 13.7149 13.6611 13.843C13.4689 13.9712 13.243 14.0394 13.012 14.039L13.0135 14.0374ZM10.4163 11.0401L12.6307 13.2546C12.7323 13.3564 12.8701 13.4136 13.014 13.4138C13.1578 13.4139 13.2957 13.357 13.3975 13.2554C13.4993 13.1538 13.5566 13.0159 13.5567 12.8721C13.5569 12.7283 13.4999 12.5904 13.3983 12.4886L11.1842 10.2741L10.4163 11.0401Z","fill","#00648B"],[1,"browse"],[1,"col-md-12"],["for","",1,"mt-1","mb-2"],["type","text","formControlName","productOrService",1,"form-control"],["type","text","formControlName","internalCode",1,"form-control"],["type","text","formControlName","itemDescription",1,"form-control"],[1,"col-md-6"],["type","number","formControlName","quantity",1,"form-control",3,"focusout","keyup.enter"],["class","primary",4,"ngIf"],["formControlName","unitType","bindLabel","desc_En"],[3,"value",4,"ngFor","ngForOf"],["formControlName","currency","bindLabel","code",1,"add-currency",3,"change"],["value","add"],[1,"bi","bi-plus-lg"],[1,"col-md-6","mb-3"],[1,"input-group","w-100"],[1,"input-group-text","currency-box"],["type","number","formControlName","unitPrice",1,"form-control",3,"focusout","keyup.enter"],["for","",1,"mb-2"],["type","number","formControlName","totalSales",1,"form-control"],[1,"bi","bi-pencil-square"],["type","number","formControlName","discountRate",1,"form-control",3,"focusout","keyup.enter"],["type","number","formControlName","discountAmount",1,"form-control",3,"focusout","keyup.enter"],[1,"row","pt-4","pb-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"title"],[1,"info"],[1,"view"],[1,"bi","bi-arrows-fullscreen"],[1,"add_line",3,"click"],[1,"table","mt-3"],[1,"row","mt-2"],[1,"table","table-borderless"],[1,"text-center"],[4,"ngFor","ngForOf"],["formArrayName","taxableItems",1,"mt-1"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","number","formControlName","totalTaxableFees",1,"form-control"],["type","number","formControlName","valueDifference",1,"form-control"],["type","number","formControlName","itemsDiscount",1,"form-control"],["type","number","formControlName","netTotal",1,"form-control"],["type","number","formControlName","total",1,"form-control"],[1,"line-autocomplete-option",3,"value"],[1,"d-flex","justify-content-between"],[1,"text-start"],[1,"activeto-label"],["class","activeto-value",4,"ngIf","ngIfElse"],["noDate",""],[1,"text-end"],[1,"item-category"],[1,"item-lookup"],[1,"activeto-value"],[2,"color","green"],[3,"value"],[3,"formGroupName"],["bindLabel","code","formControlName","taxType",3,"change"],[1,"tax-description"],["bindLabel","code","formControlName","taxSubType",3,"change"],["type","text","formControlName","rate",1,"form-control",3,"focusout","keyup.enter"],["type","text","formControlName","amount",1,"form-control",3,"focusout","keyup.enter"],[1,"trash-icon","primary","cursor-pointer",3,"click"],[1,"bi","bi-trash"],[1,"dark",3,"disabled","click"],[1,"bi","bi-plus-lg","mx-1"],[1,"dark","edit-btn",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-sidenav-container",0,1)(2,"mat-sidenav",2,3)(4,"div",4)(5,"span"),e._uU(6,"Line Details"),e.qZA()(),e.TgZ(7,"div",5),e.YNc(8,Pe,1,0,"app-loader",6),e.YNc(9,Ct,191,30,"form",7),e.qZA(),e.TgZ(10,"div",8)(11,"button",9),e.NdJ("click",function(){return n.closeSideNav()}),e._uU(12,"Cancel"),e.qZA(),e.TgZ(13,"div",10)(14,"button",11),e.NdJ("click",function(){return n.submitFormAndNew()}),e._uU(15,"Add and New"),e.qZA(),e.YNc(16,bt,3,1,"button",12),e.YNc(17,Tt,2,1,"button",13),e.qZA()()()()),2&t){const i=e.MAs(3);e.Q6J("hasBackdrop",!0)("autosize",!0)("ngClass",e.VKq(10,yt,!i.opened)),e.xp6(2),e.Q6J("opened",!1)("fixedInViewport",!0),e.xp6(6),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(5),e.Q6J("disabled",!n.lineDetailsForm.valid),e.xp6(2),e.Q6J("ngIf",!n.editedLine),e.xp6(1),e.Q6J("ngIf",n.editedLine)}},dependencies:[d.mk,d.sg,d.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,a.x0,a.CE,T.JX,T.TM,O.R,v.w9,v.jq,Fe.KE,Ne.Nt,w.XC,w.ZL,De.ey,d.Ov,d.uU],styles:[".example-container[_ngcontent-%COMP%]{position:fixed;top:0;width:45%;bottom:0;right:0}mat-sidenav[_ngcontent-%COMP%]{width:45%}mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:12px 16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #edeef6;background:#f8f8f8}mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#24324d;font-weight:500;font-size:16px}mat-sidenav[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{border-radius:50%;padding:4px 8px;display:flex;justify-content:center;align-items:center;border:1px solid #e8e8ea}mat-sidenav[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background:#f8f8f8;padding:12px 16px;position:absolute;bottom:0;width:100%}mat-sidenav[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{padding:8px 25px}mat-sidenav[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:12px 16px 120px}mat-sidenav[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{padding:0;margin:0}mat-sidenav[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#ffffff;border:1px solid #d8d8d8}.currency-box[_ngcontent-%COMP%]{width:50px;height:40px;background:#f2f2f2;border:1px solid #d8d8d8;border-radius:5px;display:flex;justify-content:center;align-items:center}.currency-box.with-drop-down[_ngcontent-%COMP%]{width:120px}.currency-box[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{width:100%}.currency-box.no-padding[_ngcontent-%COMP%]{padding:0}.input-group[_ngcontent-%COMP%]{width:80%;margin-right:30px}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 15px}.row-cell[_ngcontent-%COMP%]{margin:15px 40px;font-weight:400;color:#24324d;width:25%}.browse[_ngcontent-%COMP%]{color:#00648b;margin:0 5px}.info[_ngcontent-%COMP%]{display:flex}.info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:0 15px;font-weight:500;font-size:16px;cursor:pointer}.info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 5px}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]{background-color:#fafafa}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{align-items:flex-start}.table[_ngcontent-%COMP%]   .currency-box[_ngcontent-%COMP%]{width:38px!important;height:38px!important;font-size:14px}.table[_ngcontent-%COMP%]   ng-select[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.table[_ngcontent-%COMP%]   .tax-description[_ngcontent-%COMP%]{font-weight:500;color:#415362;font-size:13px;display:inline-block;padding:7px 6px}.line-autocomplete[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent!important;border:none!important}.line-autocomplete[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .line-autocomplete[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active, .line-autocomplete[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{box-shadow:none!important;border:none!important}.input-group[_ngcontent-%COMP%] > .line-autocomplete[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;width:1%;min-width:0}.activeto-label[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:400}.activeto-value[_ngcontent-%COMP%]{margin:0;font-size:15px;font-weight:light}.item-category[_ngcontent-%COMP%]{margin:0;color:gray;font-size:16px;font-weight:light}.item-lookup[_ngcontent-%COMP%]{margin:0;font-size:17px;color:#000;font-weight:400}.mat-autocomplete-panel[_ngcontent-%COMP%]{position:absolute!important;right:-47%!important;width:40%!important}.edit-btn[_ngcontent-%COMP%]{padding:10px 1rem}"]}),o})();function qt(o,r){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function It(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr",30),e.NdJ("click",function(){const i=e.CHM(t),l=i.$implicit,s=i.index,c=e.oxw();return e.KtG(c.openEditLineSideNav(l,s))}),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",31),e.NdJ("click",function(){const l=e.CHM(t).index,s=e.oxw();return e.KtG(s.deleteItem(l))}),e._UZ(14,"i",32),e.qZA()()}if(2&o){const t=r.$implicit;e.xp6(2),e.Oqu(null==t?null:t.productOrService),e.xp6(2),e.Oqu(null==t||null==t.itemCode?null:t.itemCode.codeLookupValue),e.xp6(2),e.Oqu(null==t?null:t.itemDescription),e.xp6(2),e.Oqu(null==t?null:t.quantity),e.xp6(2),e.Oqu(null==t?null:t.unitPrice),e.xp6(2),e.Oqu(null==t?null:t.totalSales)}}function Ut(o,r){1&o&&(e.TgZ(0,"span",33),e._uU(1,"* Add New Lines To Complete Invoice"),e.qZA())}function Ot(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",34)(2,"p",35),e._uU(3,"Total Discount"),e.qZA(),e.TgZ(4,"div",36),e._uU(5),e.qZA(),e._UZ(6,"input",37),e.TgZ(7,"button",38),e._UZ(8,"i",8),e.qZA()(),e.TgZ(9,"div",34)(10,"p",35),e._uU(11,"Value added Tax"),e.qZA(),e.TgZ(12,"div",36),e._uU(13),e.qZA(),e._UZ(14,"input",39),e.TgZ(15,"button",38),e._UZ(16,"i",8),e.qZA()(),e.TgZ(17,"div",34)(18,"p",35),e._uU(19,"Service Charges"),e.qZA(),e.TgZ(20,"div",36),e._uU(21),e.qZA(),e._UZ(22,"input",40),e.TgZ(23,"button",38),e._UZ(24,"i",8),e.qZA()(),e.TgZ(25,"div",34)(26,"p",35),e._uU(27,"Extra Invoice Discount"),e.qZA(),e.TgZ(28,"div",36),e._uU(29),e.qZA(),e._UZ(30,"input",41),e.TgZ(31,"button",38),e._UZ(32,"i",8),e.qZA()(),e.TgZ(33,"div",34)(34,"p",35),e._uU(35,"Total Amount"),e.qZA(),e.TgZ(36,"div",36),e._uU(37),e.qZA(),e._UZ(38,"input",42),e.TgZ(39,"button",38),e._UZ(40,"i",8),e.qZA()(),e.BQk()),2&o){const t=e.oxw();e.xp6(5),e.hij(" ",t.selectedCurrency," "),e.xp6(8),e.Oqu(t.selectedCurrency),e.xp6(8),e.Oqu(t.selectedCurrency),e.xp6(8),e.Oqu(t.selectedCurrency),e.xp6(8),e.Oqu(t.selectedCurrency)}}function Ft(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-line-details",43),e.NdJ("showChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.showLineDetailsComponent=i)})("submitChange",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.submitFromLineDetails(i))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("editedLine",t.editedLine)("show",t.showLineDetailsComponent)}}let Nt=(()=>{class o{constructor(t,n,i){this.fb=t,this.invoicesService=n,this.router=i,this.showLineDetailsComponent=!1,this.form=this.fb.group({items:[[],a.kI.required],totalDiscount:[{value:null,disabled:!0}],valueaddedTax:[{value:null,disabled:!0}],serviceCharges:[{value:null,disabled:!0}],extraInvoiceDiscount:[{value:null,disabled:!0}],totalAmount:[{value:null,disabled:!0}]}),this.columns=[{id:"1",name:"Code Name"},{id:"2",name:"Item Code"},{id:"3",name:"Description"},{id:"4",name:"Quantity"},{id:"5",name:"Unit Price"},{id:"6",name:"Total Sales Amount"},{id:"",name:""}]}ngOnInit(){this.invoicesService.selectedCurrency.subscribe(t=>this.selectedCurrency=t),this.patchValuesToForm()}patchValuesToForm(){this.invoicesService.lineItemsForm.subscribe(t=>{t.submitted&&this.form.patchValue(t.value)})}deleteItem(t){this.form.get("items")?.value.splice(t,1),this.form.updateValueAndValidity(),this.calculateTable(),this.submitForm(!1)}openLineDetailsSideNav(){this.showLineDetailsComponent=!0}submitFromLineDetails(t){console.log(t),t&&(t.editMode||this.form.get("items")?.value.push(t),this.calculateTable(),this.submitForm(!1))}openEditLineSideNav(t,n){this.showLineDetailsComponent=!0,this.editedLine={index:n,item:t}}calculateTable(){let t=0,n=0,i=0;this.form.get("items")?.value.forEach(l=>{t+=+l.discountAmount,i+=+l.total,n+=+l.taxableItems.reduce((s,c)=>s+c.amount,0)}),this.form.patchValue({totalDiscount:this.makeNumberDecimal(t),valueaddedTax:this.makeNumberDecimal(n),totalAmount:this.makeNumberDecimal(i),serviceCharges:this.makeNumberDecimal(0),extraInvoiceDiscount:this.makeNumberDecimal(0)})}makeNumberDecimal(t){let n=t.toString().split(".");return 1==n.length||n[1].length<2?Number(t).toFixed(2):t}submitForm(t=!0){let n=localStorage.getItem("docSubType");this.form.get("items")?.value?.length?(this.form.get("items")?.removeValidators(a.kI.required),this.form.get("items")?.updateValueAndValidity()):(this.form.get("items")?.addValidators(a.kI.required),this.form.get("items")?.updateValueAndValidity()),this.invoicesService.lineItemsForm.next({submitted:!0,valid:this.form.valid,value:this.form.getRawValue()}),t&&this.router.navigate("d"==n?["/add-invoice/order_payments"]:["/add-invoice/summary_submit"])}ngOnDestroy(){this.submitForm(!1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(m.q),e.Y36(g.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-line-items"]],decls:48,vars:8,consts:[[1,"mb-5"],["hideToggle","",3,"expanded"],[1,"form",3,"formGroup"],[1,"row","pt-4","pb-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"title"],[1,"info"],[1,"currency"],[1,"bi","bi-pencil-square"],[1,"view"],[1,"bi","bi-arrows-fullscreen"],[1,"add_line",3,"click"],[1,"bi","bi-plus-lg"],[1,"table","mt-3"],[1,"row","mt-2"],[1,"table","table-borderless"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"mt-1"],["class","active-tr",3,"click",4,"ngFor","ngForOf"],[2,"background","#F8F8F8"],[1,"bi","bi-plus-lg","mx-1"],["class","primary",4,"ngIf"],[4,"ngIf"],[1,"accordion-footer"],[1,"lg"],[1,"d-flex"],[1,"lg","mx-3"],[1,"dark","lg",3,"click"],[3,"editedLine","show","showChange","submitChange",4,"ngIf"],[1,"active-tr",3,"click"],[1,"trash-icon","primary",3,"click"],[1,"bi","bi-trash"],[1,"primary"],[1,"input-group","mb-3"],[1,"row-cell"],[1,"input-group-text","currency-box"],["type","text","formControlName","totalDiscount",1,"form-control"],[1,"input-group-text","dark-light"],["type","text","formControlName","valueaddedTax",1,"form-control"],["type","text","formControlName","serviceCharges",1,"form-control"],["type","text","formControlName","extraInvoiceDiscount",1,"form-control"],["type","text","formControlName","totalAmount",1,"form-control"],[3,"editedLine","show","showChange","submitChange"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel",1)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),e._uU(5," Line Items "),e.qZA()(),e.TgZ(6,"form",2)(7,"div",3)(8,"div",4)(9,"div",5),e._uU(10,"Items"),e.qZA(),e.TgZ(11,"div",6)(12,"div",7)(13,"span"),e._uU(14),e.qZA(),e._UZ(15,"i",8),e.qZA(),e.TgZ(16,"div",9)(17,"span"),e._uU(18,"Full View"),e.qZA(),e._UZ(19,"i",10),e.qZA(),e.TgZ(20,"div",11),e.NdJ("click",function(){return n.openLineDetailsSideNav()}),e.TgZ(21,"span"),e._uU(22,"Add Line"),e.qZA(),e._UZ(23,"i",12),e.qZA()()()(),e.TgZ(24,"div",13)(25,"div",14)(26,"table",15)(27,"thead",16)(28,"tr"),e.YNc(29,qt,2,1,"th",17),e.qZA()(),e.TgZ(30,"tbody",18),e.YNc(31,It,15,6,"tr",19),e.TgZ(32,"tr",20)(33,"div",11),e.NdJ("click",function(){return n.openLineDetailsSideNav()}),e.TgZ(34,"span"),e._uU(35,"Add Line"),e.qZA(),e._UZ(36,"i",21),e.qZA()()()(),e.YNc(37,Ut,2,0,"span",22),e.qZA()(),e.YNc(38,Ot,41,5,"ng-container",23),e.qZA(),e.TgZ(39,"div",24)(40,"button",25),e._uU(41,"Close"),e.qZA(),e.TgZ(42,"div",26)(43,"button",27),e._uU(44,"Previous"),e.qZA(),e.TgZ(45,"button",28),e.NdJ("click",function(){return n.submitForm()}),e._uU(46,"Continue"),e.qZA()()()()()(),e.YNc(47,Ft,1,2,"app-line-details",29)),2&t){let i,l,s;e.xp6(2),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("formGroup",n.form),e.xp6(8),e.hij("Currency : ",n.selectedCurrency,""),e.xp6(15),e.Q6J("ngForOf",n.columns),e.xp6(2),e.Q6J("ngForOf",null==(i=n.form.get("items"))?null:i.value),e.xp6(6),e.Q6J("ngIf",!(null!=(l=n.form.get("items"))&&l.value.length)),e.xp6(1),e.Q6J("ngIf",null==(s=n.form.get("items"))||null==s.value?null:s.value.length),e.xp6(9),e.Q6J("ngIf",n.showLineDetailsComponent)}},dependencies:[d.sg,d.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,u.pp,u.ib,u.yz,u.yK,At],styles:[".mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{background:#ffffff!important;box-shadow:0 4px 4px #00000040!important;border-radius:5px!important}.mat-expansion-panel-header[_ngcontent-%COMP%]{background:#f8f8f8!important;color:#24324d;font-weight:500}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-keyboard-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-program-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]:not(.mat-expanded)   .mat-expansion-panel-header[_ngcontent-%COMP%]:hover:not([aria-disabled=true]){background:#f8f8f8!important}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px!important}.row-border[_ngcontent-%COMP%]{border-bottom:1px solid #dfdfdf}.form[_ngcontent-%COMP%]{padding:0 24px 16px}.accordion-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:15px 24px;margin-top:20px;background:#f8f8f8;border-radius:5px 5px 0 0}.info[_ngcontent-%COMP%]{display:flex}.info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:0 15px;font-weight:500;font-size:16px;cursor:pointer}.info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 5px}.add_line[_ngcontent-%COMP%]{font-weight:500;font-size:16px;cursor:pointer}.currency-box[_ngcontent-%COMP%]{width:50px;height:50px;background:#f2f2f2;border:1px solid #d8d8d8;border-radius:5px;display:flex;justify-content:center;align-items:center}.input-group[_ngcontent-%COMP%]{width:60%;margin-left:auto;margin-right:30px}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 15px}.row-cell[_ngcontent-%COMP%]{margin:15px 40px;font-weight:400;color:#24324d;width:25%}.trash-icon[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.active-tr[_ngcontent-%COMP%]{cursor:pointer}.active-tr[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}"]}),o})(),Dt=(()=>{class o{constructor(t,n,i){this.fb=t,this.invoicesService=n,this.router=i,this.form=this.fb.group({purchaseOrderReference:[""],salesOrderReference:[""],proformaInvoiceNumber:[""],purchaseOrderDescription:[""],salesOrderDescription:[""],bankName:[""],bankAccountNo:[""],swiftCode:[""],bankAccountIBAN:[""],bankAddress:[""],terms:[""]})}ngOnInit(){this.patchValuesToForm()}patchValuesToForm(){this.invoicesService.orderPaymentsForm.subscribe(t=>{t.submitted&&this.form.patchValue(t.value)})}submitForm(t=!0){this.invoicesService.orderPaymentsForm.next({submitted:!0,valid:this.form.valid,value:this.form.value}),t&&this.router.navigate(["/add-invoice/delivery"])}ngOnDestroy(){this.submitForm(!1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(m.q),e.Y36(g.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-order-payments"]],decls:71,vars:2,consts:[[1,"mb-5"],["hideToggle","",3,"expanded"],[1,"form",3,"formGroup"],[1,"row","pt-4","pb-2","row-border"],[1,"title"],[1,"row","py-2","pt-4"],[1,"col-md-6"],["for","",1,"mb-2"],["type","text","formControlName","purchaseOrderReference",1,"form-control"],["type","text","formControlName","salesOrderReference",1,"form-control"],[1,"row","py-2"],["type","text","formControlName","proformaInvoiceNumber",1,"form-control"],["type","text","formControlName","purchaseOrderDescription",1,"form-control"],[1,"col-md-12"],["type","text","formControlName","salesOrderDescription",1,"form-control"],["type","text","formControlName","bankName",1,"form-control"],["type","text","formControlName","bankAccountNo",1,"form-control"],["type","text","formControlName","swiftCode",1,"form-control"],["type","text","formControlName","bankAccountIBAN",1,"form-control"],["type","text","formControlName","bankAddress",1,"form-control"],["type","text","formControlName","terms",1,"form-control"],[1,"accordion-footer"],[1,"lg"],[1,"d-flex"],[1,"lg","mx-3"],[1,"dark","lg",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel",1)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),e._uU(5," Orders & Payments (Optional) "),e.qZA()(),e.TgZ(6,"form",2)(7,"div",3)(8,"div",4),e._uU(9,"Orders Details"),e.qZA()(),e.TgZ(10,"div",5)(11,"div",6)(12,"label",7),e._uU(13,"Purchase Order Reference"),e.qZA(),e._UZ(14,"input",8),e.qZA(),e.TgZ(15,"div",6)(16,"label",7),e._uU(17,"Sales Order Reference"),e.qZA(),e._UZ(18,"input",9),e.qZA()(),e.TgZ(19,"div",10)(20,"div",6)(21,"label",7),e._uU(22," Proforma Invoice Number "),e.qZA(),e._UZ(23,"input",11),e.qZA(),e.TgZ(24,"div",6)(25,"label",7),e._uU(26,"Purchase Order Description"),e.qZA(),e._UZ(27,"input",12),e.qZA()(),e.TgZ(28,"div",10)(29,"div",13)(30,"label",7),e._uU(31,"Sales Order Description"),e.qZA(),e._UZ(32,"input",14),e.qZA()(),e.TgZ(33,"div",3)(34,"div",4),e._uU(35,"Payment Details"),e.qZA()(),e.TgZ(36,"div",5)(37,"div",6)(38,"label",7),e._uU(39,"Bank Name"),e.qZA(),e._UZ(40,"input",15),e.qZA(),e.TgZ(41,"div",6)(42,"label",7),e._uU(43,"Bank Account No."),e.qZA(),e._UZ(44,"input",16),e.qZA()(),e.TgZ(45,"div",10)(46,"div",6)(47,"label",7),e._uU(48,"Swift Code"),e.qZA(),e._UZ(49,"input",17),e.qZA(),e.TgZ(50,"div",6)(51,"label",7),e._uU(52,"Bank Account IBAN"),e.qZA(),e._UZ(53,"input",18),e.qZA()(),e.TgZ(54,"div",10)(55,"div",6)(56,"label",7),e._uU(57,"Bank Address"),e.qZA(),e._UZ(58,"input",19),e.qZA(),e.TgZ(59,"div",6)(60,"label",7),e._uU(61,"Payment Terms"),e.qZA(),e._UZ(62,"input",20),e.qZA()()(),e.TgZ(63,"div",21)(64,"button",22),e._uU(65,"Close"),e.qZA(),e.TgZ(66,"div",23)(67,"button",24),e._uU(68,"Previous"),e.qZA(),e.TgZ(69,"button",25),e.NdJ("click",function(){return n.submitForm()}),e._uU(70,"Continue"),e.qZA()()()()()()),2&t&&(e.xp6(2),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("formGroup",n.form))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,u.pp,u.ib,u.yz,u.yK],styles:[".mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{background:#ffffff!important;box-shadow:0 4px 4px #00000040!important;border-radius:5px!important}.mat-expansion-panel-header[_ngcontent-%COMP%]{background:#f8f8f8!important;color:#24324d;font-weight:500}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-keyboard-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-program-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]:not(.mat-expanded)   .mat-expansion-panel-header[_ngcontent-%COMP%]:hover:not([aria-disabled=true]){background:#f8f8f8!important}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px!important}.row-border[_ngcontent-%COMP%]{border-bottom:1px solid #dfdfdf}.form[_ngcontent-%COMP%]{padding:0 24px 16px}.accordion-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:15px 24px;margin-top:20px;background:#f8f8f8;border-radius:5px 5px 0 0}"]}),o})(),wt=(()=>{class o{constructor(t,n,i){this.fb=t,this.invoicesService=n,this.router=i,this.form=this.fb.group({approach:[""],packaging:[""],dateValidity:[""],exportPort:[""],countryofOrigin:[""],grossWeight:[""],netWeight:[""],terms:[""]})}ngOnInit(){this.patchValuesToForm()}patchValuesToForm(){this.invoicesService.deliveryForm.subscribe(t=>{t.submitted&&this.form.patchValue(t.value)})}submitForm(t=!0){this.invoicesService.deliveryForm.next({submitted:!0,valid:this.form.valid,value:this.form.value}),t&&this.router.navigate(["/add-invoice/summary_submit"])}ngOnDestroy(){this.submitForm(!1)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(m.q),e.Y36(g.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-delivery"]],decls:54,vars:2,consts:[[1,"mb-5"],["hideToggle","",3,"expanded"],[1,"form",3,"formGroup"],[1,"row","pt-4","pb-2","row-border"],[1,"title"],[1,"row","py-2","pt-4"],[1,"col-md-6"],["for","",1,"mb-2"],["type","text","formControlName","approach",1,"form-control"],["type","text","formControlName","packaging",1,"form-control"],[1,"row","py-2"],["type","date","formControlName","dateValidity",1,"form-control"],["type","text","formControlName","exportPort",1,"form-control"],["type","text","formControlName","countryofOrigin",1,"form-control"],["type","text","formControlName","grossWeight",1,"form-control"],["type","text","formControlName","netWeight",1,"form-control"],["type","text","formControlName","terms",1,"form-control"],[1,"accordion-footer"],[1,"lg"],[1,"d-flex"],[1,"lg","mx-3"],[1,"dark","lg",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-accordion")(2,"mat-expansion-panel",1)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),e._uU(5," Delivery (Optional) "),e.qZA()(),e.TgZ(6,"form",2)(7,"div",3)(8,"div",4),e._uU(9,"Delivery Information"),e.qZA()(),e.TgZ(10,"div",5)(11,"div",6)(12,"label",7),e._uU(13," Approach "),e.qZA(),e._UZ(14,"input",8),e.qZA(),e.TgZ(15,"div",6)(16,"label",7),e._uU(17," Packaging "),e.qZA(),e._UZ(18,"input",9),e.qZA()(),e.TgZ(19,"div",10)(20,"div",6)(21,"label",7),e._uU(22," Validity Date "),e.qZA(),e._UZ(23,"input",11),e.qZA(),e.TgZ(24,"div",6)(25,"label",7),e._uU(26," Export Port "),e.qZA(),e._UZ(27,"input",12),e.qZA()(),e.TgZ(28,"div",10)(29,"div",6)(30,"label",7),e._uU(31," Country of Origin "),e.qZA(),e._UZ(32,"input",13),e.qZA(),e.TgZ(33,"div",6)(34,"label",7),e._uU(35," Gross Weight (kg) "),e.qZA(),e._UZ(36,"input",14),e.qZA()(),e.TgZ(37,"div",10)(38,"div",6)(39,"label",7),e._uU(40," Net Weight (kg) "),e.qZA(),e._UZ(41,"input",15),e.qZA(),e.TgZ(42,"div",6)(43,"label",7),e._uU(44," Delivery Terms "),e.qZA(),e._UZ(45,"input",16),e.qZA()()(),e.TgZ(46,"div",17)(47,"button",18),e._uU(48,"Close"),e.qZA(),e.TgZ(49,"div",19)(50,"button",20),e._uU(51,"Previous"),e.qZA(),e.TgZ(52,"button",21),e.NdJ("click",function(){return n.submitForm()}),e._uU(53,"Continue"),e.qZA()()()()()()),2&t&&(e.xp6(2),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("formGroup",n.form))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,u.pp,u.ib,u.yz,u.yK],styles:[".mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{background:#ffffff!important;box-shadow:0 4px 4px #00000040!important;border-radius:5px!important}.mat-expansion-panel-header[_ngcontent-%COMP%]{background:#f8f8f8!important;color:#24324d;font-weight:500}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-keyboard-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-program-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]:not(.mat-expanded)   .mat-expansion-panel-header[_ngcontent-%COMP%]:hover:not([aria-disabled=true]){background:#f8f8f8!important}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px!important}.row-border[_ngcontent-%COMP%]{border-bottom:1px solid #dfdfdf}.form[_ngcontent-%COMP%]{padding:0 24px 16px}.accordion-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:15px 24px;margin-top:20px;background:#f8f8f8;border-radius:5px 5px 0 0}"]}),o})();function Pt(o,r){1&o&&(e.ynx(0),e.TgZ(1,"label",6),e._uU(2,"Registration Number"),e.qZA(),e._UZ(3,"input",36),e.BQk())}function kt(o,r){1&o&&(e.ynx(0),e.TgZ(1,"label",6),e._uU(2,"National ID"),e.qZA(),e._UZ(3,"input",36),e.BQk())}function Mt(o,r){1&o&&(e.ynx(0),e.TgZ(1,"label",6),e._uU(2,"ID"),e.qZA(),e._UZ(3,"input",36),e.BQk())}function St(o,r){1&o&&(e.TgZ(0,"div",1)(1,"label",6),e._uU(2,"Branch Address"),e.qZA(),e._UZ(3,"input",37),e.qZA())}function Lt(o,r){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function Jt(o,r){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(null==t?null:t.productOrService),e.xp6(2),e.Oqu(null==t||null==t.itemCode?null:t.itemCode.codeLookupValue),e.xp6(2),e.Oqu(null==t?null:t.itemDescription),e.xp6(2),e.Oqu(null==t?null:t.quantity),e.xp6(2),e.Oqu(null==t?null:t.unitPrice),e.xp6(2),e.Oqu(null==t?null:t.totalSales)}}function Vt(o,r){1&o&&(e.ynx(0),e.TgZ(1,"div",38)(2,"p",39),e._uU(3,"Total Discount"),e.qZA(),e.TgZ(4,"div",40),e._uU(5,"EGP"),e.qZA(),e._UZ(6,"input",41),e.qZA(),e.TgZ(7,"div",38)(8,"p",39),e._uU(9,"Value added Tax"),e.qZA(),e.TgZ(10,"div",40),e._uU(11,"EGP"),e.qZA(),e._UZ(12,"input",42),e.qZA(),e.TgZ(13,"div",38)(14,"p",39),e._uU(15,"Service Charges"),e.qZA(),e.TgZ(16,"div",40),e._uU(17,"EGP"),e.qZA(),e._UZ(18,"input",43),e.qZA(),e.TgZ(19,"div",38)(20,"p",39),e._uU(21,"Extra Invoice Discount"),e.qZA(),e.TgZ(22,"div",40),e._uU(23,"EGP"),e.qZA(),e._UZ(24,"input",44),e.qZA(),e.TgZ(25,"div",38)(26,"p",39),e._uU(27,"Total Amount"),e.qZA(),e.TgZ(28,"div",40),e._uU(29,"EGP"),e.qZA(),e._UZ(30,"input",45),e.qZA(),e.BQk())}function Qt(o,r){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-accordion")(4,"mat-expansion-panel",3)(5,"mat-expansion-panel-header")(6,"mat-panel-title"),e._uU(7," Order Details"),e.qZA()(),e.TgZ(8,"form",4)(9,"div",5)(10,"div",1)(11,"label",6),e._uU(12,"Purchase Order Reference"),e.qZA(),e._UZ(13,"input",46),e.qZA(),e.TgZ(14,"div",1)(15,"label",6),e._uU(16,"Sales Order Reference"),e.qZA(),e._UZ(17,"input",47),e.qZA()(),e.TgZ(18,"div",9)(19,"div",1)(20,"label",6),e._uU(21," Proforma Invoice Number "),e.qZA(),e._UZ(22,"input",48),e.qZA(),e.TgZ(23,"div",1)(24,"label",6),e._uU(25,"Purchase Order Description"),e.qZA(),e._UZ(26,"input",49),e.qZA()(),e.TgZ(27,"div",9)(28,"div",12)(29,"label",6),e._uU(30,"Sales Order Description"),e.qZA(),e._UZ(31,"input",50),e.qZA()()()()()()(),e.TgZ(32,"div",1)(33,"div",2)(34,"mat-accordion")(35,"mat-expansion-panel",3)(36,"mat-expansion-panel-header")(37,"mat-panel-title"),e._uU(38,"Payment"),e.qZA()(),e.TgZ(39,"form",4)(40,"div",5)(41,"div",1)(42,"label",6),e._uU(43,"Bank Name"),e.qZA(),e._UZ(44,"input",51),e.qZA(),e.TgZ(45,"div",1)(46,"label",6),e._uU(47,"Bank Account No."),e.qZA(),e._UZ(48,"input",52),e.qZA()(),e.TgZ(49,"div",9)(50,"div",1)(51,"label",6),e._uU(52,"Swift Code"),e.qZA(),e._UZ(53,"input",53),e.qZA(),e.TgZ(54,"div",1)(55,"label",6),e._uU(56,"Bank Account IBAN"),e.qZA(),e._UZ(57,"input",54),e.qZA()(),e.TgZ(58,"div",9)(59,"div",1)(60,"label",6),e._uU(61,"Bank Address"),e.qZA(),e._UZ(62,"input",55),e.qZA(),e.TgZ(63,"div",1)(64,"label",6),e._uU(65,"Payment Terms"),e.qZA(),e._UZ(66,"input",56),e.qZA()()()()()()()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("formGroup",t.orderDetailsForm),e.xp6(27),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("formGroup",t.orderDetailsForm)}}function Yt(o,r){if(1&o&&(e.TgZ(0,"div",0)(1,"div",12)(2,"div",2)(3,"mat-accordion")(4,"mat-expansion-panel",3)(5,"mat-expansion-panel-header")(6,"mat-panel-title"),e._uU(7," Delivery (Optional) "),e.qZA()(),e.TgZ(8,"form",4)(9,"div",57)(10,"div",23),e._uU(11,"Delivery Information"),e.qZA()(),e.TgZ(12,"div",5)(13,"div",1)(14,"label",6),e._uU(15," Approach "),e.qZA(),e._UZ(16,"input",58),e.qZA(),e.TgZ(17,"div",1)(18,"label",6),e._uU(19," Packaging "),e.qZA(),e._UZ(20,"input",59),e.qZA()(),e.TgZ(21,"div",9)(22,"div",1)(23,"label",6),e._uU(24," Validity Date "),e.qZA(),e._UZ(25,"input",60),e.qZA(),e.TgZ(26,"div",1)(27,"label",6),e._uU(28," Export Port "),e.qZA(),e._UZ(29,"input",61),e.qZA()(),e.TgZ(30,"div",9)(31,"div",1)(32,"label",6),e._uU(33," Country of Origin "),e.qZA(),e._UZ(34,"input",62),e.qZA(),e.TgZ(35,"div",1)(36,"label",6),e._uU(37," Gross Weight (kg) "),e.qZA(),e._UZ(38,"input",63),e.qZA()(),e.TgZ(39,"div",9)(40,"div",1)(41,"label",6),e._uU(42," Net Weight (kg) "),e.qZA(),e._UZ(43,"input",64),e.qZA(),e.TgZ(44,"div",1)(45,"label",6),e._uU(46," Delivery Terms "),e.qZA(),e._UZ(47,"input",56),e.qZA()()()()()()()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("formGroup",t.deliveryForm)}}let Rt=(()=>{class o{constructor(t,n){this.fb=t,this.invoicesService=n,this.issuerForm=this.fb.group({1:[{value:"",disabled:!0}],2:[{value:"",disabled:!0}],3:[{value:"",disabled:!0}],4:[{value:"",disabled:!0}],5:[{value:"",disabled:!0}],type:[{value:"",disabled:!0}],typeName:[{value:"",disabled:!0}],name:[{value:"",disabled:!0}],branchAddress:[{value:"",disabled:!0}],addressView:[{value:"",disabled:!0}],id:[{value:"",disabled:!0}]}),this.lineItemsform=this.fb.group({totalDiscount:[{value:"",disabled:!0}],valueaddedTax:[{value:"",disabled:!0}],serviceCharges:[{value:"",disabled:!0}],extraInvoiceDiscount:[{value:"",disabled:!0}],totalAmount:[{value:"",disabled:!0}],items:[null]}),this.orderDetailsForm=this.fb.group({purchaseOrderReference:[{value:"",disabled:!0}],salesOrderReference:[{value:"",disabled:!0}],proformaInvoiceNumber:[{value:"",disabled:!0}],purchaseOrderDescription:[{value:"",disabled:!0}],salesOrderDescription:[{value:"",disabled:!0}],bankName:[{value:"",disabled:!0}],bankAccountNo:[{value:"",disabled:!0}],swiftCode:[{value:"",disabled:!0}],bankAccountIBAN:[{value:"",disabled:!0}],bankAddress:[{value:"",disabled:!0}],terms:[{value:"",disabled:!0}]}),this.deliveryForm=this.fb.group({approach:[{value:"",disabled:!0}],packaging:[{value:"",disabled:!0}],validityDate:[{value:(new Date).toISOString().split("T")[0],disabled:!0}],exportPort:[{value:"",disabled:!0}],countryofOrigin:[{value:"",disabled:!0}],grossWeight:[{value:"",disabled:!0}],netWeight:[{value:"",disabled:!0}],terms:[{value:"",disabled:!0}]}),this.columns=[{id:"1",name:"Code Name"},{id:"2",name:"Item Code"},{id:"3",name:"Description"},{id:"4",name:"Quantity"},{id:"5",name:"Unit Price"},{id:"6",name:"Total Sales Amount"}]}ngOnInit(){this.docSubType=localStorage.getItem("docSubType"),this.invoicesService.basicInformationForm.subscribe(t=>{}),this.invoicesService.issuerReceiverForm.subscribe(t=>{switch(this.issuerForm.patchValue(t.value),this.issuerForm.get("type")?.value){case"B":this.issuerForm.get("typeName")?.patchValue("Business");break;case"P":this.issuerForm.get("typeName")?.patchValue("Person");break;case"F":this.issuerForm.get("typeName")?.patchValue("Foreigner");break;default:this.issuerForm.get("typeName")?.patchValue("")}}),this.invoicesService.lineItemsForm.subscribe(t=>{this.lineItemsform.patchValue(t.value)}),this.invoicesService.orderPaymentsForm.subscribe(t=>{this.orderDetailsForm.patchValue(t.value)}),this.invoicesService.deliveryForm.subscribe(t=>{this.deliveryForm.patchValue(t.value)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(m.q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-summary-submit"]],decls:94,vars:16,consts:[[1,"row"],[1,"col-md-6"],[1,"mb-4"],["hideToggle","",3,"expanded"],[1,"form",3,"formGroup"],[1,"row","py-2","pt-4"],["for","",1,"mb-2"],["type","text","formControlName","1",1,"form-control"],["type","text","formControlName","2",1,"form-control"],[1,"row","py-2"],["type","text","formControlName","3",1,"form-control"],["type","text","formControlName","4",1,"form-control"],[1,"col-md-12"],["type","text","formControlName","5",1,"form-control"],["type","text","formControlName","typeName",1,"form-control"],[4,"ngIf"],["type","text","formControlName","name",1,"form-control"],["class","col-md-6",4,"ngIf"],[1,"mb-2"],[1,"d-flex"],["type","text","formControlName","addressView",1,"form-control"],[1,"row","pt-4","pb-2"],[1,"d-flex","justify-content-between","align-items-center"],[1,"title"],[1,"info"],[1,"currency"],[1,"bi","bi-pencil-square"],[1,"view"],[1,"bi","bi-arrows-fullscreen"],[1,"table","mt-3"],[1,"row","mt-2"],[1,"table","table-borderless"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"mt-1"],["class","row",4,"ngIf"],["type","text","formControlName","id",1,"form-control"],["type","text","formControlName","branchAddress",1,"form-control"],[1,"input-group","mb-3"],[1,"row-cell"],[1,"input-group-text","currency-box"],["type","text","formControlName","totalDiscount",1,"form-control"],["type","text","formControlName","valueaddedTax",1,"form-control"],["type","text","formControlName","serviceCharges",1,"form-control"],["type","text","formControlName","extraInvoiceDiscount",1,"form-control"],["type","text","formControlName","totalAmount",1,"form-control"],["type","text","formControlName","purchaseOrderReference",1,"form-control"],["type","text","formControlName","salesOrderReference",1,"form-control"],["type","text","formControlName","proformaInvoiceNumber",1,"form-control"],["type","text","formControlName","purchaseOrderDescription",1,"form-control"],["type","text","formControlName","salesOrderDescription",1,"form-control"],["type","text","formControlName","bankName",1,"form-control"],["type","text","formControlName","bankAccountNo",1,"form-control"],["type","text","formControlName","swiftCode",1,"form-control"],["type","text","formControlName","bankAccountIBAN",1,"form-control"],["type","text","formControlName","bankAddress",1,"form-control"],["type","text","formControlName","terms",1,"form-control"],[1,"row","pt-4","pb-2","row-border"],["type","text","formControlName","approach",1,"form-control"],["type","text","formControlName","packaging",1,"form-control"],["type","date","formControlName","validityDate",1,"form-control"],["type","text","formControlName","exportPort",1,"form-control"],["type","text","formControlName","countryofOrigin",1,"form-control"],["type","text","formControlName","grossWeight",1,"form-control"],["type","text","formControlName","netWeight",1,"form-control"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-accordion")(4,"mat-expansion-panel",3)(5,"mat-expansion-panel-header")(6,"mat-panel-title"),e._uU(7," Issuer (from) * "),e.qZA()(),e.TgZ(8,"form",4)(9,"div",5)(10,"div",1)(11,"label",6),e._uU(12,"Title"),e.qZA(),e._UZ(13,"input",7),e.qZA(),e.TgZ(14,"div",1)(15,"label",6),e._uU(16,"Name"),e.qZA(),e._UZ(17,"input",8),e.qZA()(),e.TgZ(18,"div",9)(19,"div",1)(20,"label",6),e._uU(21,"Registration Number"),e.qZA(),e._UZ(22,"input",10),e.qZA(),e.TgZ(23,"div",1)(24,"label",6),e._uU(25,"Tax Activity Code"),e.qZA(),e._UZ(26,"input",11),e.qZA()(),e.TgZ(27,"div",9)(28,"div",12)(29,"label",6),e._uU(30,"Branch Address"),e.qZA(),e._UZ(31,"input",13),e.qZA()()()()()()(),e.TgZ(32,"div",1)(33,"div",2)(34,"mat-accordion")(35,"mat-expansion-panel",3)(36,"mat-expansion-panel-header")(37,"mat-panel-title"),e._uU(38," receiver (To) * "),e.qZA()(),e.TgZ(39,"form",4)(40,"div",5)(41,"div",1)(42,"label",6),e._uU(43,"Type"),e.qZA(),e._UZ(44,"input",14),e.qZA(),e.TgZ(45,"div",1),e.YNc(46,Pt,4,0,"ng-container",15),e.YNc(47,kt,4,0,"ng-container",15),e.YNc(48,Mt,4,0,"ng-container",15),e.qZA()(),e.TgZ(49,"div",9)(50,"div",1)(51,"label",6),e._uU(52,"Name"),e.qZA(),e._UZ(53,"input",16),e.qZA(),e.YNc(54,St,4,0,"div",17),e.qZA(),e.TgZ(55,"div",9)(56,"div",12)(57,"label",18),e._uU(58,"Address"),e.qZA(),e.TgZ(59,"div",19),e._UZ(60,"input",20),e.qZA()()()()()()()()(),e.TgZ(61,"div",0)(62,"div",12)(63,"div",2)(64,"mat-accordion")(65,"mat-expansion-panel",3)(66,"mat-expansion-panel-header")(67,"mat-panel-title"),e._uU(68," Line Items "),e.qZA()(),e.TgZ(69,"form",4)(70,"div",21)(71,"div",22)(72,"div",23),e._uU(73,"Items"),e.qZA(),e.TgZ(74,"div",24)(75,"div",25)(76,"span"),e._uU(77),e.qZA(),e._UZ(78,"i",26),e.qZA(),e.TgZ(79,"div",27)(80,"span"),e._uU(81,"Full View"),e.qZA(),e._UZ(82,"i",28),e.qZA()()()(),e.TgZ(83,"div",29)(84,"div",30)(85,"table",31)(86,"thead",32)(87,"tr"),e.YNc(88,Lt,2,1,"th",33),e.qZA()(),e.TgZ(89,"tbody",34),e.YNc(90,Jt,13,6,"tr",33),e.qZA()()()(),e.YNc(91,Vt,31,0,"ng-container",15),e.qZA()()()()()(),e.YNc(92,Qt,67,4,"div",35),e.YNc(93,Yt,48,2,"div",35)),2&t){let i,l,s,c,f,_;e.xp6(4),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("formGroup",n.issuerForm),e.xp6(27),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("formGroup",n.issuerForm),e.xp6(7),e.Q6J("ngIf","B"===(null==n.issuerForm||null==(i=n.issuerForm.get("type"))?null:i.value)),e.xp6(1),e.Q6J("ngIf","P"===(null==n.issuerForm||null==(l=n.issuerForm.get("type"))?null:l.value)),e.xp6(1),e.Q6J("ngIf","F"===(null==n.issuerForm||null==(s=n.issuerForm.get("type"))?null:s.value)),e.xp6(6),e.Q6J("ngIf","B"===(null==n.issuerForm||null==(c=n.issuerForm.get("type"))?null:c.value)),e.xp6(11),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("formGroup",n.lineItemsform),e.xp6(8),e.hij("Currency : ","EGP",""),e.xp6(11),e.Q6J("ngForOf",n.columns),e.xp6(2),e.Q6J("ngForOf",null==(f=n.lineItemsform.get("items"))?null:f.value),e.xp6(1),e.Q6J("ngIf",null==(_=n.lineItemsform.get("items"))||null==_.value?null:_.value.length),e.xp6(1),e.Q6J("ngIf","d"==n.docSubType),e.xp6(1),e.Q6J("ngIf","d"==n.docSubType)}},dependencies:[d.sg,d.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,u.pp,u.ib,u.yz,u.yK],styles:[".mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{background:#ffffff!important;box-shadow:0 4px 4px #00000040!important;border-radius:5px!important}.mat-expansion-panel-header[_ngcontent-%COMP%]{background:#f8f8f8!important;color:#24324d;font-weight:500}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-keyboard-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.cdk-program-focused[_ngcontent-%COMP%]:not([aria-disabled=true]), .mat-expansion-panel[_ngcontent-%COMP%]:not(.mat-expanded)   .mat-expansion-panel-header[_ngcontent-%COMP%]:hover:not([aria-disabled=true]){background:#f8f8f8!important}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px!important}.row-border[_ngcontent-%COMP%]{border-bottom:1px solid #dfdfdf}.form[_ngcontent-%COMP%]{padding:0 24px 16px}.accordion-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:15px 24px;margin-top:20px;background:#f8f8f8;border-radius:5px 5px 0 0}.info[_ngcontent-%COMP%]{display:flex}.info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:0 15px;font-weight:500;font-size:16px;cursor:pointer}.info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 5px}.currency-box[_ngcontent-%COMP%]{width:50px;height:50px;background:#f2f2f2;border:1px solid #d8d8d8;border-radius:5px;display:flex;justify-content:center;align-items:center}.input-group[_ngcontent-%COMP%]{width:60%;margin-left:auto;margin-right:30px}.input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 15px}.row-cell[_ngcontent-%COMP%]{margin:15px 40px;font-weight:400;color:#24324d;width:25%}.trash-icon[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}"]}),o})(),Gt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,E.m,g.Bz.forChild([{path:"",component:G,children:[{path:"issuer_receiver",component:Ze},{path:"line_items",component:Nt},{path:"order_payments",component:Dt},{path:"delivery",component:wt},{path:"summary_submit",component:Rt}]}])]}),o})()}}]);